@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Custom Properties */
:root {
	--gradient-primary: linear-gradient(135deg, #1a6dff 0%, #00dcd5 100%);
	--gradient-primary-hover: linear-gradient(135deg, #0052e0 0%, #00b1af 100%);
	--gradient-surface: linear-gradient(180deg, #1f1f23 0%, #18181b 100%);
	--shadow-glow: 0 0 20px rgba(26, 109, 255, 0.3);
	--shadow-glow-accent: 0 0 20px rgba(0, 220, 213, 0.3);
	--radius-lg: 1rem;
	--radius-xl: 1.5rem;
	--radius-2xl: 2rem;
	--sidebar-width: 280px;
	--header-height: 64px;
	--transition-fast: 150ms;
	--transition-normal: 300ms;
	--transition-slow: 500ms;

	/* Color CSS variables for components using var(--color-*) */
	/* Dark mode (default) */
	--color-surface-50: #fafafa;
	--color-surface-100: #f4f4f5;
	--color-surface-200: #e4e4e7;
	--color-surface-300: #d4d4d8;
	--color-surface-400: #a1a1aa;
	--color-surface-500: #71717a;
	--color-surface-600: #52525b;
	--color-surface-700: #3f3f46;
	--color-surface-800: #27272a;
	--color-surface-900: #18181b;
	--color-surface-950: #0f0f11;

	--color-primary-300: #7db3ff;
	--color-primary-400: #4691ff;
	--color-primary-500: #1a6dff;
	--color-primary-600: #0052e0;

	--color-warning-400: #fbbf24;

	/* Area Role Colors (Dark Mode - default) */
	--role-owner: #9333ea;
	--role-owner-bg: rgba(147, 51, 234, 0.15);

	--role-admin: #3b82f6;
	--role-admin-bg: rgba(59, 130, 246, 0.15);

	--role-member: #10b981;
	--role-member-bg: rgba(16, 185, 129, 0.15);

	--role-viewer: #6b7280;
	--role-viewer-bg: rgba(107, 114, 128, 0.15);

	--role-inherited: #0ea5e9;
	--role-inherited-bg: rgba(14, 165, 233, 0.15);

	/* Page Permission Colors (Dark Mode - default) */
	/* 3-tier: viewer, editor, admin - matches role colors for consistency */
	--permission-viewer: #6b7280;
	--permission-viewer-bg: rgba(107, 114, 128, 0.15);
	--permission-editor: #10b981;
	--permission-editor-bg: rgba(16, 185, 129, 0.15);
	--permission-admin: #3b82f6;
	--permission-admin-bg: rgba(59, 130, 246, 0.15);

	/* Page Editor Variables (Dark Mode - default) */
	/* Based on DOCUMENT_SYSTEM.md Section 5.1 */
	--editor-bg: #1e1e1e;
	--editor-bg-secondary: #252526;
	--editor-text: #e4e4e7;
	--editor-text-secondary: #a1a1aa;
	--editor-text-muted: #71717a;
	--editor-border: #3f3f46;
	--editor-border-focus: #3b82f6;
	--toolbar-bg: #252526;
	--toolbar-border: #3f3f46;
	--toolbar-button-hover: #3f3f46;
	--toolbar-button-active: #52525b;
	--chat-panel-bg: #252526;
	--chat-panel-border: #3f3f46;
	--editor-selection: #1e3a5f;
	--card-bg: #252526;
	--card-bg-hover: #2d2d30;
	--card-border: #3f3f46;
}

@layer base {
	html {
		scroll-behavior: smooth;
	}

	/* Dark theme (default) */
	html, html.dark {
		--bg-body: #0f0f11;
		--bg-body-gradient: linear-gradient(180deg, #0f0f11 0%, #18181b 100%);
		--text-primary: #f4f4f5;
		--text-secondary: #a1a1aa;
		--text-muted: #71717a;
		color-scheme: dark;
	}

	/* Light theme */
	html.light {
		--bg-body: #ffffff;
		--bg-body-gradient: linear-gradient(180deg, #ffffff 0%, #f4f4f5 100%);
		--text-primary: #18181b;
		--text-secondary: #52525b;
		--text-muted: #71717a;
		color-scheme: light;

		/* Invert surface colors for light mode */
		--color-surface-50: #0f0f11;
		--color-surface-100: #18181b;
		--color-surface-200: #27272a;
		--color-surface-300: #3f3f46;
		--color-surface-400: #52525b;
		--color-surface-500: #71717a;
		--color-surface-600: #a1a1aa;
		--color-surface-700: #d4d4d8;
		--color-surface-800: #e4e4e7;
		--color-surface-900: #f4f4f5;
		--color-surface-950: #fafafa;

		/* Area Role Colors (Light Mode - lighter backgrounds) */
		--role-owner-bg: rgba(147, 51, 234, 0.1);
		--role-admin-bg: rgba(59, 130, 246, 0.1);
		--role-member-bg: rgba(16, 185, 129, 0.1);
		--role-viewer-bg: rgba(107, 114, 128, 0.1);
		--role-inherited-bg: rgba(14, 165, 233, 0.1);

		/* Page Permission Colors (Light Mode - lighter backgrounds) */
		--permission-viewer-bg: rgba(107, 114, 128, 0.1);
		--permission-editor-bg: rgba(16, 185, 129, 0.1);
		--permission-admin-bg: rgba(59, 130, 246, 0.1);
	}

	/* Light theme overrides for Tailwind surface colors */
	html.light {
		--tw-surface-50: #fafafa;
		--tw-surface-100: #f4f4f5;
		--tw-surface-200: #e4e4e7;
		--tw-surface-300: #d4d4d8;
		--tw-surface-400: #a1a1aa;
		--tw-surface-500: #71717a;
		--tw-surface-600: #52525b;
		--tw-surface-700: #3f3f46;
		--tw-surface-800: #27272a;
		--tw-surface-900: #18181b;
		--tw-surface-950: #0f0f11;

		/* Page Editor Variables (Light Mode) */
		/* Based on DOCUMENT_SYSTEM.md Section 5.1 */
		--editor-bg: #ffffff;
		--editor-bg-secondary: #f8fafc;
		--editor-text: #1e293b;
		--editor-text-secondary: #64748b;
		--editor-text-muted: #94a3b8;
		--editor-border: #e2e8f0;
		--editor-border-focus: #3b82f6;
		--toolbar-bg: #ffffff;
		--toolbar-border: #e2e8f0;
		--toolbar-button-hover: #f1f5f9;
		--toolbar-button-active: #e2e8f0;
		--chat-panel-bg: #f8fafc;
		--chat-panel-border: #e2e8f0;
		--editor-selection: #dbeafe;
		--card-bg: #ffffff;
		--card-bg-hover: #f8fafc;
		--card-border: #e2e8f0;
	}

	body {
		background: var(--bg-body);
		background: var(--bg-body-gradient);
		color: var(--text-primary);
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		min-height: 100vh;
	}

	/* Light theme component overrides */
	html.light body {
		@apply text-surface-900;
	}

	/* Background colors - invert the scale */
	html.light .bg-surface-900 {
		background-color: #ffffff;
	}

	html.light .bg-surface-900\/80 {
		background-color: rgba(255, 255, 255, 0.9);
	}

	html.light .bg-surface-950 {
		background-color: #f8fafc;
	}

	html.light .bg-surface-800 {
		background-color: #f4f4f5;
	}

	html.light .bg-surface-700 {
		background-color: #e4e4e7;
	}

	html.light .bg-surface-600 {
		background-color: #d4d4d8;
	}

	/* Border colors */
	html.light .border-surface-800 {
		border-color: #e4e4e7;
	}

	html.light .border-surface-700 {
		border-color: #d4d4d8;
	}

	html.light .border-surface-600 {
		border-color: #a1a1aa;
	}

	/* Text colors - invert the scale */
	html.light .text-surface-100 {
		color: #18181b;
	}

	html.light .text-surface-200 {
		color: #27272a;
	}

	html.light .text-surface-300 {
		color: #3f3f46;
	}

	html.light .text-surface-400 {
		color: #52525b;
	}

	html.light .text-surface-500 {
		color: #71717a;
	}

	/* Placeholder text */
	html.light .placeholder-surface-500::placeholder {
		color: #a1a1aa;
	}

	/* Chat messages */
	html.light .message-assistant {
		background-color: #f4f4f5;
		color: #18181b;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04);
	}

	html.light .message-user {
		box-shadow: 0 4px 12px rgba(26, 109, 255, 0.2), 0 2px 4px rgba(0, 0, 0, 0.06);
	}

	/* Sidebar */
	html.light .sidebar-item:hover {
		background-color: #f4f4f5;
	}

	html.light .sidebar-item.active {
		background-color: #e4e4e7;
		color: #18181b;
	}

	html.light .sidebar-item .conversation-title {
		color: #27272a;
	}

	html.light .sidebar-item.active .conversation-title {
		color: #18181b;
	}

	/* Pinned sections - light mode */
	html.light .section-header {
		color: #71717a;
	}

	html.light .section-divider {
		border-color: #e4e4e7;
	}

	/* Cards */
	html.light .card {
		background-color: #ffffff;
		border-color: #e4e4e7;
	}

	/* Buttons */
	html.light .btn-icon {
		color: #52525b;
	}

	html.light .btn-icon:hover {
		background-color: #f4f4f5;
		color: #18181b;
	}

	html.light .btn-ghost {
		color: #3f3f46;
	}

	html.light .btn-ghost:hover {
		background-color: #f4f4f5;
		color: #18181b;
	}

	html.light .btn-secondary {
		background-color: #f4f4f5;
		border-color: #e4e4e7;
		color: #18181b;
	}

	html.light .btn-secondary:hover {
		background-color: #e4e4e7;
		border-color: #d4d4d8;
	}

	/* Input fields */
	html.light .input-field {
		background-color: #ffffff;
		border-color: #d4d4d8;
		color: #18181b;
	}

	html.light .input-field:hover:not(:focus):not(:disabled) {
		border-color: #a1a1aa;
	}

	html.light .input-field::placeholder {
		color: #a1a1aa;
	}

	/* Select fields */
	html.light .select-field {
		background-color: #ffffff;
		border-color: #d4d4d8;
		color: #18181b;
	}

	/* Scrollbar for light mode */
	html.light ::-webkit-scrollbar-track {
		background-color: #f4f4f5;
	}

	html.light ::-webkit-scrollbar-thumb {
		background-color: #d4d4d8;
	}

	html.light ::-webkit-scrollbar-thumb:hover {
		background-color: #a1a1aa;
	}

	html.light * {
		scrollbar-color: #d4d4d8 #f4f4f5;
	}

	/* Selection */
	html.light ::selection {
		background-color: rgba(26, 109, 255, 0.2);
		color: #002970;
	}

	/* Keyboard shortcuts */
	html.light kbd {
		background-color: #e4e4e7;
		color: #3f3f46;
	}

	/* LLM Settings slider - light mode */
	html.light .llm-slider {
		background: linear-gradient(to right, #d4d4d8, #e4e4e7);
	}

	html.light .llm-slider::-webkit-slider-thumb {
		box-shadow: 0 2px 6px rgba(26, 109, 255, 0.3);
	}

	html.light .llm-slider::-moz-range-track {
		background: linear-gradient(to right, #d4d4d8, #e4e4e7);
	}

	/* Custom scrollbar */
	::-webkit-scrollbar {
		width: 8px;
		height: 8px;
	}

	::-webkit-scrollbar-track {
		@apply bg-surface-900;
	}

	::-webkit-scrollbar-thumb {
		@apply bg-surface-600 rounded-full;
		transition: background-color var(--transition-fast);
	}

	::-webkit-scrollbar-thumb:hover {
		@apply bg-surface-500;
	}

	/* Firefox scrollbar */
	* {
		scrollbar-width: thin;
		scrollbar-color: #52525b #18181b;
	}

	/* Selection */
	::selection {
		@apply bg-primary-600/40 text-white;
	}
}

@layer components {
	/* Primary button with gradient */
	.btn-primary {
		@apply relative px-5 py-2.5 rounded-xl font-medium text-white overflow-hidden;
		@apply transition-all duration-300 ease-out;
		@apply disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none;
		background: var(--gradient-primary);
		box-shadow: 0 4px 15px rgba(26, 109, 255, 0.25);
	}

	.btn-primary:hover:not(:disabled) {
		background: var(--gradient-primary-hover);
		box-shadow: 0 6px 20px rgba(26, 109, 255, 0.35);
		transform: translateY(-1px);
	}

	.btn-primary:active:not(:disabled) {
		transform: translateY(0);
		box-shadow: 0 2px 10px rgba(26, 109, 255, 0.2);
	}

	/* Secondary button */
	.btn-secondary {
		@apply px-5 py-2.5 bg-surface-700 hover:bg-surface-600 rounded-xl font-medium;
		@apply transition-all duration-200 ease-out;
		@apply disabled:opacity-50 disabled:cursor-not-allowed;
		@apply border border-surface-600 hover:border-surface-500;
	}

	/* Ghost button */
	.btn-ghost {
		@apply px-4 py-2 rounded-lg font-medium text-surface-300;
		@apply hover:bg-surface-800 hover:text-surface-100;
		@apply transition-colors duration-200;
		@apply disabled:opacity-50 disabled:cursor-not-allowed;
	}

	/* Icon button */
	.btn-icon {
		@apply p-2 rounded-lg text-surface-400 hover:text-surface-100;
		@apply hover:bg-surface-800 transition-colors duration-200;
		@apply disabled:opacity-50 disabled:cursor-not-allowed;
	}

	/* Danger button */
	.btn-danger {
		@apply px-5 py-2.5 bg-red-600 hover:bg-red-700 rounded-xl font-medium text-white;
		@apply transition-colors duration-200;
		@apply disabled:opacity-50 disabled:cursor-not-allowed;
	}

	/* Input field */
	.input-field {
		@apply w-full px-4 py-3 bg-surface-800 border border-surface-700 rounded-xl;
		@apply focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500;
		@apply text-surface-100 placeholder-surface-500;
		@apply transition-all duration-200;
	}

	.input-field:hover:not(:focus):not(:disabled) {
		@apply border-surface-600;
	}

	/* Select field */
	.select-field {
		@apply w-full px-4 py-3 bg-surface-800 border border-surface-700 rounded-xl;
		@apply focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500;
		@apply text-surface-100 cursor-pointer appearance-none;
		@apply transition-all duration-200;
		background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2371717a' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
		background-position: right 0.75rem center;
		background-repeat: no-repeat;
		background-size: 1.25em 1.25em;
		padding-right: 2.5rem;
	}

	/* Card */
	.card {
		@apply bg-surface-900 border border-surface-800 rounded-2xl;
		@apply shadow-lg;
	}

	.card-hover {
		@apply card transition-all duration-200;
		@apply hover:border-surface-700 hover:shadow-xl hover:bg-surface-800/50;
	}

	/* Glass effect */
	.glass {
		@apply bg-surface-900/80 backdrop-blur-xl border border-surface-700/50;
	}

	/* Gradient text */
	.text-gradient {
		@apply bg-clip-text text-transparent;
		background-image: var(--gradient-primary);
	}

	/* Gradient border */
	.gradient-border {
		@apply relative;
	}

	.gradient-border::before {
		content: '';
		position: absolute;
		inset: 0;
		padding: 1px;
		border-radius: inherit;
		background: var(--gradient-primary);
		-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
		mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
		pointer-events: none;
	}

	/* Thinking indicator */
	.thinking-dot {
		@apply w-2 h-2 rounded-full bg-primary-500;
		animation: thinkingDot 1.4s ease-in-out infinite;
	}

	.thinking-dot:nth-child(1) {
		animation-delay: 0s;
	}

	.thinking-dot:nth-child(2) {
		animation-delay: 0.2s;
	}

	.thinking-dot:nth-child(3) {
		animation-delay: 0.4s;
	}

	/* Avatar */
	.avatar {
		@apply w-8 h-8 rounded-full flex items-center justify-center font-medium text-sm;
	}

	.avatar-user {
		@apply avatar bg-primary-600 text-white;
	}

	.avatar-assistant {
		@apply avatar text-white;
		background: var(--gradient-primary);
	}

	/* Message container - consistent width for both user and assistant */
	.message-container {
		width: 100%;
		max-width: 100%;
	}

	/* Message bubble */
	.message-bubble {
		@apply px-4 py-3 rounded-2xl w-full;
	}

	.message-user {
		@apply message-bubble bg-primary-600 text-white max-w-[95%];
		border-bottom-right-radius: 0.5rem;
		box-shadow: 0 4px 12px rgba(26, 109, 255, 0.25), 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.message-assistant {
		@apply message-bubble bg-surface-800 text-surface-100;
		border-bottom-left-radius: 0.5rem;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	/* Sidebar */
	.sidebar {
		@apply w-[var(--sidebar-width)] h-full bg-surface-900 border-r border-surface-800;
		@apply flex flex-col;
	}

	.sidebar-item {
		@apply flex items-center gap-3 px-4 py-3 rounded-xl mx-2;
		@apply text-surface-300 hover:text-surface-100 hover:bg-surface-800;
		@apply transition-all duration-200 cursor-pointer;
	}

	.sidebar-item.active {
		@apply bg-surface-800 text-white;
	}

	.sidebar-item .conversation-title {
		@apply text-surface-200;
	}

	.sidebar-item.active .conversation-title {
		@apply text-white;
	}

	/* Pinned section styles */
	.section-header {
		@apply flex items-center gap-2 px-4 py-2 text-xs font-medium uppercase tracking-wider;
		@apply text-surface-500;
	}

	/* Collapsible section header (Phase C) */
	.section-header-collapsible {
		@apply w-full cursor-pointer transition-colors duration-150;
		@apply hover:text-surface-300 hover:bg-surface-800/50;
		@apply border-none bg-transparent;
	}

	.section-count {
		@apply ml-auto text-surface-600 font-normal;
	}

	.section-divider {
		@apply mx-4 my-2 border-t border-surface-800;
	}

	.pinned-section {
		@apply mb-1;
	}

	/* Streaming cursor */
	.streaming-cursor {
		@apply inline-block w-2 h-5 bg-primary-500 ml-1;
		animation: blink 1s step-end infinite;
	}

	@keyframes blink {
		0%, 100% { opacity: 1; }
		50% { opacity: 0; }
	}

	/* Tooltip */
	.tooltip {
		@apply absolute z-50 px-2 py-1 text-xs font-medium text-white;
		@apply bg-surface-700 rounded-lg shadow-lg;
		@apply opacity-0 invisible transition-all duration-200;
		@apply -translate-y-1;
	}

	.tooltip-trigger:hover .tooltip {
		@apply opacity-100 visible translate-y-0;
	}

	/* Loading skeleton */
	.skeleton {
		@apply bg-surface-800 rounded animate-pulse;
	}

	/* LLM Settings Slider */
	.llm-slider {
		-webkit-appearance: none;
		appearance: none;
		height: 6px;
		border-radius: 3px;
		background: linear-gradient(to right, #3f3f46, #52525b);
		outline: none;
		cursor: pointer;
	}

	.llm-slider::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 18px;
		height: 18px;
		border-radius: 50%;
		background: linear-gradient(135deg, #1a6dff 0%, #00dcd5 100%);
		cursor: pointer;
		box-shadow: 0 2px 6px rgba(26, 109, 255, 0.4);
		transition: transform 0.15s ease, box-shadow 0.15s ease;
	}

	.llm-slider::-webkit-slider-thumb:hover {
		transform: scale(1.1);
		box-shadow: 0 3px 10px rgba(26, 109, 255, 0.5);
	}

	.llm-slider::-moz-range-thumb {
		width: 18px;
		height: 18px;
		border-radius: 50%;
		background: linear-gradient(135deg, #1a6dff 0%, #00dcd5 100%);
		cursor: pointer;
		border: none;
		box-shadow: 0 2px 6px rgba(26, 109, 255, 0.4);
	}

	.llm-slider::-moz-range-track {
		height: 6px;
		border-radius: 3px;
		background: linear-gradient(to right, #3f3f46, #52525b);
	}

	/* Amber variant for thinking budget slider */
	.llm-slider-amber::-webkit-slider-thumb {
		background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
		box-shadow: 0 2px 6px rgba(245, 158, 11, 0.4);
	}

	.llm-slider-amber::-webkit-slider-thumb:hover {
		box-shadow: 0 3px 10px rgba(245, 158, 11, 0.5);
	}

	.llm-slider-amber::-moz-range-thumb {
		background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
		box-shadow: 0 2px 6px rgba(245, 158, 11, 0.4);
	}

	/* Search Toggle Button */
	.search-toggle {
		@apply relative;
	}

	.search-toggle.active::after {
		content: '';
		position: absolute;
		inset: -2px;
		border-radius: inherit;
		background: linear-gradient(135deg, rgba(26, 109, 255, 0.3), rgba(0, 220, 213, 0.3));
		z-index: -1;
		animation: searchGlow 2s ease-in-out infinite;
	}

	@keyframes searchGlow {
		0%, 100% {
			opacity: 0.5;
		}
		50% {
			opacity: 1;
		}
	}

	/* Sources section in chat messages */
	.sources-section {
		@apply text-surface-300;
	}

	.source-item {
		@apply px-2 py-1 rounded-lg hover:bg-surface-700/50 transition-colors;
	}

	/* Light mode sources */
	html.light .sources-section {
		border-color: #e4e4e7;
	}

	html.light .source-item:hover {
		background-color: rgba(0, 0, 0, 0.05);
	}

	html.light .sources-section .text-surface-400 {
		color: #52525b;
	}

	/* Searching indicator styles */
	.searching-indicator {
		@apply bg-surface-700/30 rounded-lg px-3;
	}

	html.light .searching-indicator {
		background-color: rgba(26, 109, 255, 0.08);
	}

	/* File upload button */
	.file-upload-btn {
		@apply relative;
	}

	.file-upload-btn:hover:not(:disabled) {
		@apply bg-surface-700;
	}

	/* File chip (in input area and messages) */
	.file-chip {
		@apply flex items-center gap-2 px-3 py-1.5 rounded-lg;
		@apply bg-surface-700 text-surface-200;
		@apply border border-surface-600;
		@apply transition-colors duration-150;
	}

	.file-chip:hover {
		@apply bg-surface-600;
	}

	/* Attachment display in messages */
	.attachment-item {
		@apply rounded-lg overflow-hidden;
		@apply border border-surface-700;
	}

	.attachment-item button:hover {
		@apply bg-surface-700/50;
	}

	/* File type icon colors */
	.file-icon-pdf {
		@apply text-red-400;
	}

	.file-icon-doc {
		@apply text-blue-400;
	}

	.file-icon-json {
		@apply text-yellow-400;
	}

	.file-icon-text {
		@apply text-surface-400;
	}

	/* Light mode file components */
	html.light .file-chip {
		@apply bg-surface-100 text-surface-800 border-surface-300;
	}

	html.light .file-chip:hover {
		@apply bg-surface-200;
	}

	html.light .attachment-item {
		@apply border-surface-300 bg-white;
	}

	html.light .attachment-item button:hover {
		@apply bg-surface-100;
	}

	html.light .file-upload-btn:hover:not(:disabled) {
		@apply bg-surface-200;
	}

	/* Arena specific styles */
	.arena-page {
		@apply min-h-screen flex flex-col;
	}

	.arena-model-selector {
		@apply p-4 overflow-x-auto scrollbar-hide;
	}

	.arena-response-card {
		@apply flex flex-col h-full min-h-[400px] rounded-2xl border transition-all duration-300;
	}

	.arena-response-card.winner {
		@apply border-accent-500/50;
		box-shadow: var(--shadow-glow-accent);
	}

	.arena-response-card.user-pick {
		@apply border-primary-500/50;
		box-shadow: var(--shadow-glow);
	}

	.arena-judgment {
		@apply rounded-2xl border border-surface-700 overflow-hidden;
	}

	/* Arena glow effects */
	.shadow-glow {
		box-shadow: var(--shadow-glow);
	}

	.shadow-glow-accent {
		box-shadow: var(--shadow-glow-accent);
	}

	/* Arena battle card hover state */
	.arena-battle-card {
		@apply cursor-pointer transition-all duration-200;
	}

	.arena-battle-card:hover {
		@apply bg-surface-800;
	}

	/* Arena vote button pulse animation */
	.arena-vote-pulse {
		animation: votePulse 2s ease-in-out infinite;
	}

	@keyframes votePulse {
		0%, 100% {
			box-shadow: 0 0 0 0 rgba(26, 109, 255, 0.4);
		}
		50% {
			box-shadow: 0 0 0 8px rgba(26, 109, 255, 0);
		}
	}

	/* Light mode arena styles */
	html.light .arena-response-card {
		@apply bg-white border-surface-300;
	}

	html.light .arena-response-card.winner {
		background-color: rgba(0, 220, 213, 0.1);
		@apply border-accent-400;
	}

	html.light .arena-response-card.user-pick {
		background-color: rgba(26, 109, 255, 0.1);
		@apply border-primary-400;
	}

	html.light .arena-judgment {
		@apply border-surface-300;
	}

	html.light .arena-battle-card:hover {
		@apply bg-surface-100;
	}

	/* Download dropdown */
	.download-dropdown {
		@apply absolute right-0 top-full mt-1;
		@apply bg-surface-800 rounded-lg shadow-xl;
		@apply border border-surface-700;
		@apply py-1 min-w-[160px] z-50;
	}

	.download-dropdown-item {
		@apply flex items-center gap-2 px-3 py-2 w-full text-left;
		@apply text-sm text-surface-200;
		@apply hover:bg-surface-700 transition-colors;
	}

	.download-dropdown-item:first-child {
		@apply rounded-t-lg;
	}

	.download-dropdown-item:last-child {
		@apply rounded-b-lg;
	}

	/* Light mode download dropdown */
	html.light .download-dropdown {
		background-color: #ffffff;
		border-color: #d4d4d8;
		box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
	}

	html.light .download-dropdown-item {
		color: #27272a;
	}

	html.light .download-dropdown-item:hover {
		background-color: #f4f4f5;
	}

	html.light .download-dropdown-item .text-surface-500 {
		color: #a1a1aa;
	}
}

@layer utilities {
	/* Hide scrollbar */
	.scrollbar-hide {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}

	.scrollbar-hide::-webkit-scrollbar {
		display: none;
	}

	/* Truncate multiline */
	.line-clamp-1 {
		display: -webkit-box;
		-webkit-line-clamp: 1;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	/* Focus ring */
	.focus-ring {
		@apply focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:ring-offset-2 focus:ring-offset-surface-900;
	}

	/* Focus ring - light mode */
	html.light .focus-ring {
		@apply focus:ring-offset-white;
	}

	/* Fix ring-offset for light mode */
	html.light [class*="ring-offset-surface-900"] {
		--tw-ring-offset-color: white;
	}

	/* Gradient animation */
	.animate-gradient {
		background-size: 200% 200%;
		animation: gradientX 3s ease infinite;
	}
}

/* Keyframes for thinking animation */
@keyframes thinkingDot {
	0%, 80%, 100% {
		transform: scale(0.6);
		opacity: 0.5;
	}
	40% {
		transform: scale(1);
		opacity: 1;
	}
}

/* ==========================================
   Task Focus Mode
   ========================================== */

/* Focus mode CSS custom properties are set dynamically:
   --task-accent: The focused task's color
   --task-accent-muted: 15% opacity version for backgrounds
   --task-accent-ring: 40% opacity version for borders/rings
*/

/* Smooth transition for all elements that use task accent */
html.task-focus-mode {
	--focus-transition: 300ms ease;
}

/* Focus mode indicator glow on chat input */
html.task-focus-mode .chat-input-container {
	transition: box-shadow var(--focus-transition), border-color var(--focus-transition);
}

html.task-focus-mode .chat-input-field:not(:focus-within) {
	border-color: var(--task-accent-ring, transparent) !important;
	box-shadow:
		0 0 0 1px var(--task-accent-ring, transparent),
		0 0 12px var(--task-accent-muted, transparent),
		0 0 24px color-mix(in srgb, var(--task-accent, transparent) 5%, transparent);
}

/* Subtle background tint when in focus mode */
html.task-focus-mode main {
	background: linear-gradient(
		135deg,
		color-mix(in srgb, var(--task-accent, transparent) 3%, transparent) 0%,
		color-mix(in srgb, var(--task-accent, transparent) 1%, transparent) 50%,
		transparent 100%
	);
}

html.task-focus-mode main::before {
	content: '';
	position: absolute;
	inset: 0;
	pointer-events: none;
	background: radial-gradient(
		ellipse at bottom center,
		color-mix(in srgb, var(--task-accent, transparent) 5%, transparent) 0%,
		transparent 70%
	);
	z-index: 0;
}

/* Header focus indicator uses task color */
html.task-focus-mode .focus-indicator {
	transition: all var(--focus-transition);
}

/* Focus mode pulse animation for high-priority tasks */
@keyframes focus-pulse {
	0%, 100% {
		box-shadow:
			0 0 0 1px var(--task-accent-ring, transparent),
			0 0 12px var(--task-accent-muted, transparent);
	}
	50% {
		box-shadow:
			0 0 0 2px var(--task-accent-ring, transparent),
			0 0 20px var(--task-accent-muted, transparent);
	}
}

html.task-focus-mode.high-priority .chat-input-field:not(:focus-within) {
	animation: focus-pulse 2s ease-in-out infinite;
}

/* ==========================================
   LIGHT MODE - Component Overrides
   ========================================== */

/* --- AreaCard Component --- */
html.light .area-card {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.08) !important;
}

html.light .area-card:hover {
	background: rgba(0, 0, 0, 0.04) !important;
	border-color: rgba(0, 0, 0, 0.12) !important;
}

html.light .area-card.general {
	border-color: rgba(0, 0, 0, 0.1) !important;
}

html.light .area-card .title {
	color: #18181b !important;
}

html.light .area-card .card-meta,
html.light .area-card .stat,
html.light .area-card .activity,
html.light .area-card .context-indicator {
	color: #71717a !important;
}

html.light .area-card .separator {
	color: #a1a1aa !important;
}

html.light .area-card .card-arrow {
	color: #a1a1aa !important;
}

html.light .area-card .menu-trigger {
	color: #71717a !important;
}

html.light .area-card .menu-trigger:hover {
	background: rgba(0, 0, 0, 0.06) !important;
	color: #18181b !important;
}

html.light .area-card .menu-dropdown {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
}

html.light .area-card .menu-item {
	color: #27272a !important;
}

html.light .area-card .menu-item:hover {
	background: #f4f4f5 !important;
	color: #18181b !important;
}

html.light .area-card .menu-item.danger {
	color: #dc2626 !important;
}

html.light .area-card .menu-item.danger:hover {
	background: rgba(220, 38, 38, 0.1) !important;
	color: #dc2626 !important;
}

/* --- TaskCard Component --- */
html.light .task-card {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .task-card:hover {
	background: rgba(0, 0, 0, 0.04) !important;
	border-color: rgba(0, 0, 0, 0.1) !important;
}

html.light .task-card.attention {
	background: rgba(245, 158, 11, 0.08) !important;
	border-color: rgba(245, 158, 11, 0.2) !important;
}

html.light .task-card.attention:hover {
	background: rgba(245, 158, 11, 0.12) !important;
	border-color: rgba(245, 158, 11, 0.3) !important;
}

html.light .task-card .task-title {
	color: #18181b !important;
}

html.light .task-card .subtask-badge {
	color: #52525b !important;
	background: rgba(0, 0, 0, 0.06) !important;
}

html.light .task-card .task-arrow,
html.light .task-card .task-chevron {
	color: #a1a1aa !important;
}

html.light .task-card .accordion-content {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .task-card .action-btn {
	background: rgba(0, 0, 0, 0.04) !important;
	color: #52525b !important;
}

html.light .task-card .action-btn:hover {
	background: rgba(0, 0, 0, 0.08) !important;
	color: #18181b !important;
}

html.light .task-card .due-badge.due-later {
	background: rgba(0, 0, 0, 0.06) !important;
	color: #52525b !important;
}

/* --- Space Page Loading/Error States --- */
html.light .loading-container {
	color: rgba(0, 0, 0, 0.5) !important;
}

html.light .loading-spinner {
	border-color: rgba(0, 0, 0, 0.1) !important;
}

html.light .error-container h1 {
	color: rgba(0, 0, 0, 0.9) !important;
}

html.light .error-container p {
	color: rgba(0, 0, 0, 0.5) !important;
}

html.light .back-link {
	background: rgba(59, 130, 246, 0.1) !important;
}

html.light .back-link:hover {
	background: rgba(59, 130, 246, 0.15) !important;
}

/* --- Space Header Text --- */
html.light .space-header-title {
	color: #18181b !important;
}

html.light .space-header-description {
	color: #52525b !important;
}

/* --- Space Dashboard Sections --- */
html.light .dashboard-section-title {
	color: #18181b !important;
}

html.light .dashboard-section-subtitle {
	color: #52525b !important;
}

/* Add Area Card (Create New) */
html.light .area-card.create-card {
	background: rgba(0, 0, 0, 0.01) !important;
	border-style: dashed !important;
	border-color: rgba(0, 0, 0, 0.15) !important;
}

html.light .area-card.create-card:hover {
	background: rgba(0, 0, 0, 0.03) !important;
	border-color: rgba(0, 0, 0, 0.25) !important;
}

html.light .area-card.create-card .title {
	color: #3b82f6 !important;
}

/* --- Header Space Navigation --- */
html.light .space-nav-item {
	color: #52525b !important;
}

html.light .space-nav-item:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.05) !important;
}

html.light .space-nav-item.active {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.08) !important;
}

html.light .space-nav-separator {
	background: rgba(0, 0, 0, 0.1) !important;
}

html.light .space-nav-add {
	color: #71717a !important;
	border-color: rgba(0, 0, 0, 0.15) !important;
}

html.light .space-nav-add:hover {
	color: #18181b !important;
	border-color: rgba(0, 0, 0, 0.3) !important;
	background: rgba(0, 0, 0, 0.03) !important;
}

html.light .space-nav-all {
	color: #71717a !important;
}

html.light .space-nav-all:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.05) !important;
}

html.light .space-nav-edit {
	color: #71717a !important;
}

html.light .space-nav-edit:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.08) !important;
}

/* --- ConversationItem Component --- */
html.light .conversation-item {
	background: transparent !important;
}

html.light .conversation-item:hover {
	background-color: #f4f4f5 !important;
}

html.light .conversation-item.active {
	background-color: rgba(99, 102, 241, 0.1) !important;
}

html.light .conversation-item .item-title {
	color: #27272a !important;
}

html.light .conversation-item .item-time {
	color: #71717a !important;
}

html.light .conversation-item .item-preview {
	color: #71717a !important;
}

html.light .conversation-item .rename-input {
	background-color: #ffffff !important;
	border-color: #6366f1 !important;
	color: #18181b !important;
}

html.light .conversation-item .pin-indicator {
	color: #f59e0b !important;
}

html.light .conversation-item .menu-trigger {
	color: #71717a !important;
}

html.light .conversation-item .menu-trigger:hover {
	background-color: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .conversation-item .dropdown-menu {
	background-color: #ffffff !important;
	border-color: #e4e4e7 !important;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1) !important;
}

html.light .conversation-item .dropdown-item {
	color: #27272a !important;
}

html.light .conversation-item .dropdown-item:hover {
	background-color: #f4f4f5 !important;
}

html.light .conversation-item .dropdown-item.danger {
	color: #dc2626 !important;
}

html.light .conversation-item .dropdown-item.danger:hover {
	background-color: rgba(220, 38, 38, 0.1) !important;
}

html.light .conversation-item .dropdown-divider {
	background-color: #e4e4e7 !important;
}

/* Task pill in conversation item */
html.light .conversation-item .task-pill {
	color: var(--task-color, #3b82f6) !important;
}

/* --- Header Component --- */
html.light .header-container {
	background: rgba(255, 255, 255, 0.9) !important;
	border-color: #e4e4e7 !important;
}

html.light .header-logo-text {
	color: #18181b !important;
}

/* Model selector badge */
html.light .model-badge {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #27272a !important;
}

html.light .model-badge:hover {
	background: #e4e4e7 !important;
	border-color: #d4d4d8 !important;
}

/* --- White text override (for titles that use text-white) --- */
html.light .text-white {
	color: #18181b !important;
}

/* But preserve white text on colored backgrounds */
html.light .bg-primary-600 .text-white,
html.light .bg-primary-500 .text-white,
html.light .bg-red-600 .text-white,
html.light .bg-green-600 .text-white,
html.light [class*="bg-gradient-primary"] .text-white,
html.light .btn-primary,
html.light .message-user,
html.light .avatar-user,
html.light .avatar-assistant {
	color: #ffffff !important;
}

/* --- Sidebar specific --- */
html.light .sidebar {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .sidebar .search-container input {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .sidebar .search-container input::placeholder {
	color: #a1a1aa !important;
}

/* --- Task Dashboard Components --- */
html.light .task-group-section {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .task-group-header {
	color: #18181b !important;
}

html.light .task-group-count {
	color: #71717a !important;
}

html.light .stats-row {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .stat-item .stat-value {
	color: #18181b !important;
}

html.light .stat-item .stat-label {
	color: #71717a !important;
}

/* --- Focus Suggestion --- */
html.light .focus-suggestion {
	background: rgba(59, 130, 246, 0.05) !important;
	border-color: rgba(59, 130, 246, 0.2) !important;
}

html.light .focus-suggestion-title {
	color: #18181b !important;
}

html.light .focus-suggestion-reason {
	color: #52525b !important;
}

/* --- Welcome screens --- */
html.light .welcome-container {
	color: #18181b !important;
}

html.light .welcome-title {
	color: #18181b !important;
}

html.light .welcome-subtitle {
	color: #52525b !important;
}

html.light .quick-start-badge {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #27272a !important;
}

html.light .quick-start-badge:hover {
	background: #e4e4e7 !important;
	border-color: #d4d4d8 !important;
}

/* --- Modals --- */
html.light .modal-backdrop {
	background: rgba(0, 0, 0, 0.4) !important;
}

html.light .modal-content {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .modal-header {
	border-color: #e4e4e7 !important;
}

html.light .modal-title {
	color: #18181b !important;
}

html.light .modal-body {
	color: #27272a !important;
}

html.light .modal-footer {
	border-color: #e4e4e7 !important;
}

/* --- General text overrides for surface colors --- */
html.light .text-surface-100,
html.light .text-surface-200 {
	color: #18181b !important;
}

html.light .text-surface-300 {
	color: #27272a !important;
}

html.light .text-surface-400 {
	color: #52525b !important;
}

/* --- Hover states for surface backgrounds --- */
html.light .hover\:bg-surface-800:hover {
	background-color: #f4f4f5 !important;
}

html.light .hover\:bg-surface-700:hover {
	background-color: #e4e4e7 !important;
}

/* --- Planning tasks indicator --- */
html.light .planning-indicator {
	background: rgba(139, 92, 246, 0.1) !important;
	border-color: rgba(139, 92, 246, 0.3) !important;
}

html.light .planning-indicator-count {
	background: #8b5cf6 !important;
	color: #ffffff !important;
}

/* --- Context panel --- */
html.light .context-panel {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .context-panel-header {
	border-color: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .context-panel-section-title {
	color: #52525b !important;
}

/* --- Document items in context --- */
html.light .document-item {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
}

html.light .document-item:hover {
	background: #e4e4e7 !important;
}

html.light .document-item-title {
	color: #18181b !important;
}

html.light .document-item-meta {
	color: #71717a !important;
}

/* --- SpaceDashboard Component --- */
html.light .space-name {
	color: #18181b !important;
}

html.light .space-description {
	color: #52525b !important;
}

html.light .section-title {
	color: #71717a !important;
}

html.light .section-count {
	background: rgba(0, 0, 0, 0.06) !important;
	color: #52525b !important;
}

html.light .activity-sections {
	border-color: rgba(0, 0, 0, 0.08) !important;
}

html.light .show-more-activity {
	color: #52525b !important;
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.08) !important;
}

html.light .show-more-activity:hover {
	background: rgba(0, 0, 0, 0.04) !important;
	color: #18181b !important;
}

html.light .empty-dashboard {
	color: #52525b !important;
}

html.light .empty-title {
	color: #18181b !important;
}

html.light .empty-text {
	color: #71717a !important;
}

html.light .empty-icon {
	color: #a1a1aa !important;
}

/* --- RecentActivitySection --- */
html.light .activity-item {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .activity-item:hover {
	background: rgba(0, 0, 0, 0.04) !important;
}

html.light .activity-title {
	color: #18181b !important;
}

html.light .activity-meta {
	color: #71717a !important;
}

html.light .activity-time {
	color: #a1a1aa !important;
}

/* --- TasksSection Component --- */
html.light .tasks-section {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .tasks-header {
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .tasks-header-title {
	color: #18181b !important;
}

html.light .tasks-empty {
	color: #71717a !important;
}

html.light .view-all-btn {
	color: #52525b !important;
}

html.light .view-all-btn:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.04) !important;
}

/* --- CreateAreaCard --- */
html.light .create-area-card {
	background: rgba(0, 0, 0, 0.01) !important;
	border-style: dashed !important;
	border-color: rgba(0, 0, 0, 0.15) !important;
}

html.light .create-area-card:hover {
	background: rgba(0, 0, 0, 0.03) !important;
	border-color: rgba(0, 0, 0, 0.25) !important;
}

html.light .create-area-card .create-icon {
	color: #3b82f6 !important;
}

html.light .create-area-card .create-title {
	color: #3b82f6 !important;
}

/* --- Chat message content in light mode --- */
html.light .message-assistant {
	background-color: #f4f4f5 !important;
	color: #18181b !important;
}

html.light .message-assistant h1,
html.light .message-assistant h2,
html.light .message-assistant h3,
html.light .message-assistant h4,
html.light .message-assistant h5,
html.light .message-assistant h6 {
	color: #18181b !important;
}

html.light .message-assistant strong,
html.light .message-assistant b {
	color: #18181b !important;
}

html.light .message-assistant code {
	background-color: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .message-assistant pre {
	background-color: #1e1e2e !important;
}

html.light .message-assistant a {
	color: #2563eb !important;
}

html.light .message-assistant a:hover {
	color: #1d4ed8 !important;
}

/* --- Arena page light mode refinements --- */
html.light .arena-setup-card {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .arena-category-chip {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #52525b !important;
}

html.light .arena-category-chip.active {
	background: rgba(59, 130, 246, 0.1) !important;
	border-color: rgba(59, 130, 246, 0.3) !important;
	color: #2563eb !important;
}

html.light .arena-context-picker {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #27272a !important;
}

html.light .arena-model-chip {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #27272a !important;
}

html.light .arena-model-chip:hover {
	background: #e4e4e7 !important;
}

/* Arena vote button */
html.light .arena-vote-btn {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #27272a !important;
}

html.light .arena-vote-btn:hover {
	background: #e4e4e7 !important;
}

/* Arena verdict section */
html.light .arena-verdict {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .arena-verdict-header {
	background: #f4f4f5 !important;
}

html.light .arena-ranking-item {
	background: rgba(0, 0, 0, 0.02) !important;
}

/* --- ChatInput light mode --- */
html.light .chat-input-container {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .chat-input-field {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .chat-input-field::placeholder {
	color: #a1a1aa !important;
}

html.light .chat-input-field:focus {
	border-color: #3b82f6 !important;
}

/* Chat input action buttons */
html.light .chat-action-btn {
	color: #71717a !important;
}

html.light .chat-action-btn:hover {
	color: #18181b !important;
	background: #f4f4f5 !important;
}

/* --- Thinking block in messages --- */
html.light .thinking-block {
	background: rgba(245, 158, 11, 0.08) !important;
	border-color: rgba(245, 158, 11, 0.2) !important;
}

html.light .thinking-header {
	color: #b45309 !important;
}

html.light .thinking-content {
	color: #52525b !important;
}

/* --- Sources section --- */
html.light .sources-section {
	border-color: #e4e4e7 !important;
}

html.light .sources-header {
	color: #52525b !important;
}

html.light .source-link {
	color: #2563eb !important;
}

html.light .source-link:hover {
	color: #1d4ed8 !important;
	background: rgba(37, 99, 235, 0.05) !important;
}

/* --- TasksSection additional overrides --- */
html.light .task-count {
	background: rgba(0, 0, 0, 0.06) !important;
	color: #52525b !important;
}

html.light .show-more-button {
	color: #52525b !important;
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .show-more-button:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.04) !important;
	border-color: rgba(0, 0, 0, 0.1) !important;
}

html.light .empty-tasks {
	color: #71717a !important;
}

html.light .empty-tasks .empty-text {
	color: #71717a !important;
}

html.light .empty-tasks .empty-icon {
	color: #a1a1aa !important;
}

/* Task item in TasksSection */
html.light .task-item {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.06) !important;
}

html.light .task-item:hover {
	background: rgba(0, 0, 0, 0.04) !important;
}

html.light .task-item .task-title {
	color: #18181b !important;
}

html.light .task-item .task-meta {
	color: #71717a !important;
}

html.light .task-item .task-time {
	color: #a1a1aa !important;
}

/* --- RecentActivitySection additional overrides --- */
html.light .activity-item .item-title {
	color: #18181b !important;
}

html.light .activity-item .item-area {
	color: #52525b !important;
}

html.light .activity-item .item-time {
	color: #a1a1aa !important;
}

html.light .activity-item .task-badge {
	background: rgba(0, 0, 0, 0.06) !important;
	color: #52525b !important;
}

/* --- Settings Panel --- */
html.light .settings-panel {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .settings-header {
	border-color: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .settings-section-title {
	color: #18181b !important;
}

html.light .settings-label {
	color: #27272a !important;
}

html.light .settings-description {
	color: #71717a !important;
}

/* Theme toggle specific */
html.light .theme-option {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
	color: #27272a !important;
}

html.light .theme-option.active {
	background: rgba(59, 130, 246, 0.1) !important;
	border-color: rgba(59, 130, 246, 0.3) !important;
	color: #2563eb !important;
}

html.light .theme-option:hover {
	background: #e4e4e7 !important;
}

/* --- AreaWelcome / Welcome screens --- */
html.light .area-welcome {
	color: #18181b !important;
}

html.light .area-welcome-title {
	color: #18181b !important;
}

html.light .area-welcome-subtitle {
	color: #52525b !important;
}

/* --- Context banner --- */
html.light .task-context-banner {
	background: rgba(0, 0, 0, 0.02) !important;
	border-color: rgba(0, 0, 0, 0.08) !important;
}

html.light .task-context-banner .banner-title {
	color: #18181b !important;
}

html.light .task-context-banner .banner-subtitle {
	color: #52525b !important;
}

/* --- Dropdown menus (generic) --- */
html.light .dropdown-menu,
html.light [class*="dropdown"] {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .dropdown-item {
	color: #27272a !important;
}

html.light .dropdown-item:hover {
	background: #f4f4f5 !important;
}

/* --- Second opinion panel --- */
html.light .second-opinion-panel {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .second-opinion-header {
	border-color: #e4e4e7 !important;
}

html.light .second-opinion-content {
	color: #18181b !important;
}

/* ==========================================
   LIGHT MODE - Premium Refinements
   ========================================== */

/* --- Main Content Area Backgrounds --- */
html.light main,
html.light .main-content {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

html.light .bg-surface-950 {
	background-color: #fafafa !important;
}

html.light .bg-surface-900 {
	background-color: #ffffff !important;
}

/* --- Space Dashboard Page --- */
html.light .dashboard {
	background: transparent !important;
}

html.light .dashboard-content {
	background: transparent !important;
}

/* Area Cards - Premium styling */
html.light .area-card {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02) !important;
}

html.light .area-card:hover {
	background: #ffffff !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04) !important;
	transform: translateY(-1px);
}

/* Create Area Card */
html.light .create-area-card,
html.light .area-card.create-card {
	background: #fafafa !important;
	border: 2px dashed #d4d4d8 !important;
	box-shadow: none !important;
}

html.light .create-area-card:hover,
html.light .area-card.create-card:hover {
	background: #f4f4f5 !important;
	border-color: #a1a1aa !important;
}

/* --- Task Items in Space Dashboard --- */
html.light .task-item {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03) !important;
}

html.light .task-item:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06) !important;
}

/* Task wrapper */
html.light .task-wrapper {
	background: transparent !important;
}

/* --- Tasks Dashboard Page (/spaces/[space]/tasks) --- */
html.light .tasks-page,
html.light .task-dashboard {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

/* Focus Suggestion Card */
html.light .focus-suggestion,
html.light .greeting-card {
	background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.02) !important;
}

html.light .focus-suggestion:hover,
html.light .greeting-card:hover {
	box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08), 0 3px 6px rgba(0, 0, 0, 0.03) !important;
}

html.light .greeting-message {
	color: #52525b !important;
}

html.light .greeting-task-title {
	color: #18181b !important;
}

html.light .greeting-task-subtitle {
	color: #71717a !important;
}

/* Stats Row */
html.light .stats-row {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

html.light .stat-item {
	border-color: #e4e4e7 !important;
}

html.light .stat-value {
	color: #18181b !important;
}

html.light .stat-label {
	color: #71717a !important;
}

/* Task Group Sections */
html.light .task-group-section,
html.light .task-section {
	background: transparent !important;
	border: none !important;
}

html.light .task-group-header,
html.light .group-header {
	color: #52525b !important;
}

html.light .group-count {
	background: #e4e4e7 !important;
	color: #52525b !important;
}

/* Task Cards in Dashboard */
html.light .task-card {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

html.light .task-card:hover {
	background: #ffffff !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06) !important;
}

html.light .task-card.attention {
	background: #fffbeb !important;
	border-color: #fcd34d !important;
}

html.light .task-card.attention:hover {
	box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15) !important;
}

/* Empty state in task sections */
html.light .empty-group,
html.light .nothing-due {
	color: #a1a1aa !important;
	background: #fafafa !important;
	border: 1px dashed #e4e4e7 !important;
}

/* --- Area Page (/spaces/[space]/[area]) --- */
html.light .area-page,
html.light .area-content {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

/* Area Welcome Screen */
html.light .area-welcome,
html.light .welcome-container {
	background: transparent !important;
}

html.light .area-welcome-icon {
	background: linear-gradient(135deg, #f4f4f5 0%, #e4e4e7 100%) !important;
}

html.light .area-welcome-title,
html.light .area-name {
	color: #18181b !important;
}

html.light .area-welcome-description,
html.light .area-context {
	color: #52525b !important;
}

/* Continue Card */
html.light .continue-card,
html.light .resume-card {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04) !important;
}

html.light .continue-card:hover,
html.light .resume-card:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08) !important;
}

html.light .continue-title {
	color: #18181b !important;
}

html.light .continue-time {
	color: #71717a !important;
}

/* Recent Conversations in Area */
html.light .recent-section-title {
	color: #52525b !important;
}

html.light .recent-count {
	color: #a1a1aa !important;
}

html.light .recent-item,
html.light .conversation-row {
	background: #ffffff !important;
	border: 1px solid #f4f4f5 !important;
}

html.light .recent-item:hover,
html.light .conversation-row:hover {
	background: #fafafa !important;
	border-color: #e4e4e7 !important;
}

html.light .recent-item-title {
	color: #18181b !important;
}

html.light .recent-item-time {
	color: #a1a1aa !important;
}

/* Reference Documents indicator */
html.light .documents-indicator {
	color: #71717a !important;
}

/* --- Task Focus Page (/spaces/[space]/task/[task]) --- */
html.light .task-focus-page,
html.light .task-chat-page {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

/* Task Header Banner */
html.light .task-header,
html.light .task-banner,
html.light .task-context-banner {
	background: #ffffff !important;
	border-bottom: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

html.light .task-header-title,
html.light .banner-task-title {
	color: #18181b !important;
}

html.light .task-header-due,
html.light .banner-due-date {
	color: #71717a !important;
}

/* Priority badge in light mode */
html.light .priority-badge.high {
	background: #fef2f2 !important;
	color: #dc2626 !important;
	border: 1px solid #fecaca !important;
}

/* --- Chat Area in All Pages --- */
html.light .chat-container,
html.light .messages-container {
	background: transparent !important;
}

/* Assistant message bubble - premium styling */
html.light .message-assistant {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02) !important;
	color: #18181b !important;
}

/* User message bubble - keep primary color */
html.light .message-user {
	box-shadow: 0 2px 8px rgba(26, 109, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.04) !important;
}

/* --- Quick Start Badges --- */
html.light .quick-start-badge {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #27272a !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03) !important;
}

html.light .quick-start-badge:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06) !important;
}

/* --- Activity Items in Recent Conversations --- */
html.light .activity-item {
	background: #ffffff !important;
	border: 1px solid #f4f4f5 !important;
	box-shadow: none !important;
}

html.light .activity-item:hover {
	background: #fafafa !important;
	border-color: #e4e4e7 !important;
}

/* Task badge in activity items */
html.light .task-badge,
html.light .area-badge {
	background: #f4f4f5 !important;
	color: #52525b !important;
	border: 1px solid #e4e4e7 !important;
}

/* --- Conversation Drawer (in areas) --- */
html.light .conversation-drawer {
	background: #ffffff !important;
	border-color: #e4e4e7 !important;
}

html.light .drawer-header {
	border-color: #e4e4e7 !important;
	background: #fafafa !important;
}

html.light .drawer-section-title {
	color: #52525b !important;
}

/* --- Show More Buttons --- */
html.light .show-more-button,
html.light .show-more-activity,
html.light .load-more-btn {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .show-more-button:hover,
html.light .show-more-activity:hover,
html.light .load-more-btn:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

/* --- Context Panel (Right side) --- */
html.light .context-panel {
	background: #ffffff !important;
	border-left: 1px solid #e4e4e7 !important;
}

html.light .context-panel-header {
	background: #fafafa !important;
	border-bottom: 1px solid #e4e4e7 !important;
}

/* --- Subtasks Panel --- */
html.light .subtasks-panel {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .subtask-item {
	background: #fafafa !important;
	border: 1px solid #f4f4f5 !important;
}

html.light .subtask-item:hover {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
}

/* --- Header Refinements --- */
html.light header,
html.light .header-container,
html.light [class*="header"] {
	background: rgba(255, 255, 255, 0.95) !important;
	backdrop-filter: blur(12px) !important;
	border-color: #e4e4e7 !important;
}

/* Breadcrumb in header */
html.light .breadcrumb {
	color: #71717a !important;
}

html.light .breadcrumb-link {
	color: #52525b !important;
}

html.light .breadcrumb-link:hover {
	color: #18181b !important;
}

html.light .breadcrumb-separator {
	color: #d4d4d8 !important;
}

/* --- Sidebar Refinements --- */
html.light .sidebar {
	background: #ffffff !important;
	border-right: 1px solid #e4e4e7 !important;
}

html.light .sidebar-header {
	border-bottom: 1px solid #f4f4f5 !important;
}

/* New Chat button */
html.light .new-chat-btn {
	background: linear-gradient(135deg, #1a6dff 0%, #00dcd5 100%) !important;
	color: #ffffff !important;
}

/* --- Footer / Chat Input Area --- */
html.light .chat-input-container {
	background: #ffffff !important;
	border-top: 1px solid #e4e4e7 !important;
	box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.02) !important;
}

html.light .chat-input-field {
	background: #fafafa !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .chat-input-field:focus {
	background: #ffffff !important;
	border-color: #3b82f6 !important;
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* Input action buttons */
html.light .input-action-btn {
	color: #71717a !important;
}

html.light .input-action-btn:hover {
	color: #18181b !important;
	background: #f4f4f5 !important;
}

/* --- Keyboard shortcuts indicator --- */
html.light .keyboard-hint {
	color: #a1a1aa !important;
}

html.light kbd {
	background: #f4f4f5 !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

/* --- Tooltip styling --- */
html.light .tooltip {
	background: #18181b !important;
	color: #ffffff !important;
}

/* --- Dropdown/Select styling --- */
html.light select,
html.light .select-field {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #18181b !important;
}

html.light select:focus,
html.light .select-field:focus {
	border-color: #3b82f6 !important;
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* --- Toggle/Switch styling --- */
html.light .toggle-track {
	background: #e4e4e7 !important;
}

html.light .toggle-track.active {
	background: #3b82f6 !important;
}

/* --- Badge refinements --- */
html.light .badge {
	background: #f4f4f5 !important;
	color: #52525b !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .badge-primary {
	background: rgba(59, 130, 246, 0.1) !important;
	color: #2563eb !important;
	border-color: rgba(59, 130, 246, 0.2) !important;
}

html.light .badge-success {
	background: rgba(34, 197, 94, 0.1) !important;
	color: #16a34a !important;
	border-color: rgba(34, 197, 94, 0.2) !important;
}

html.light .badge-warning {
	background: rgba(245, 158, 11, 0.1) !important;
	color: #d97706 !important;
	border-color: rgba(245, 158, 11, 0.2) !important;
}

html.light .badge-danger {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
	border-color: rgba(239, 68, 68, 0.2) !important;
}

/* --- Scrollbar for light mode (refined) --- */
html.light ::-webkit-scrollbar-track {
	background: #fafafa !important;
}

html.light ::-webkit-scrollbar-thumb {
	background: #d4d4d8 !important;
	border-radius: 4px !important;
}

html.light ::-webkit-scrollbar-thumb:hover {
	background: #a1a1aa !important;
}

/* ==========================================
   LIGHT MODE - Task Dashboard Deep Overrides
   ========================================== */

/* --- TaskDashboard Component --- */
html.light .task-dashboard {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

html.light .dashboard-header {
	background: rgba(255, 255, 255, 0.95) !important;
	border-bottom: 1px solid #e4e4e7 !important;
	backdrop-filter: blur(8px) !important;
}

html.light .back-button {
	color: #52525b !important;
}

html.light .back-button:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.05) !important;
}

html.light .dashboard-title {
	color: #18181b !important;
}

html.light .task-total {
	background: #e4e4e7 !important;
	color: #52525b !important;
}

html.light .header-center {
	color: #18181b !important;
}

/* --- FocusSuggestion Deep Overrides --- */
html.light .focus-suggestion {
	background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04), 0 2px 4px rgba(0, 0, 0, 0.02) !important;
}

html.light .context-message {
	color: #52525b !important;
}

html.light .suggested-task {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03) !important;
}

html.light .suggested-task:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06) !important;
}

html.light .task-indicator {
	background: rgba(251, 191, 36, 0.15) !important;
	color: #d97706 !important;
}

html.light .task-content .task-title {
	color: #18181b !important;
}

html.light .task-content .task-reason {
	color: #71717a !important;
}

html.light .task-action {
	color: #a1a1aa !important;
}

html.light .suggested-task:hover .task-action {
	color: #52525b !important;
}

/* --- StatsRow Deep Overrides --- */
html.light .stats-row {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03) !important;
}

html.light .stat {
	color: #71717a !important;
}

html.light .stat.has-value {
	color: rgba(34, 197, 94, 0.9) !important;
}

html.light .stat-icon {
	color: inherit !important;
}

html.light .stat-value {
	color: #18181b !important;
}

html.light .stat.has-value .stat-value {
	color: #16a34a !important;
}

html.light .stat-label {
	color: #71717a !important;
}

html.light .stat-streak .stat-value {
	color: #52525b !important;
}

html.light .stat-streak.streak-warm .stat-value {
	color: #d97706 !important;
}

html.light .stat-streak.streak-hot .stat-value {
	color: #ea580c !important;
}

/* --- TaskGroupSection Deep Overrides --- */
html.light .task-group {
	background: transparent !important;
}

html.light .section-header {
	background: transparent !important;
}

html.light .section-title {
	color: #71717a !important;
}

html.light .task-group.warning .section-title {
	color: #d97706 !important;
}

html.light .task-count {
	background: #e4e4e7 !important;
	color: #52525b !important;
}

html.light .task-group.warning .task-count {
	background: rgba(245, 158, 11, 0.15) !important;
	color: #d97706 !important;
}

html.light .chevron {
	color: #a1a1aa !important;
}

html.light .empty-message {
	color: #a1a1aa !important;
}

html.light .show-more-btn {
	color: #52525b !important;
	background: #ffffff !important;
	border: 1px dashed #d4d4d8 !important;
}

html.light .show-more-btn:hover {
	color: #18181b !important;
	background: #fafafa !important;
	border-color: #a1a1aa !important;
}

/* --- Delete Confirmation Modal --- */
html.light .confirm-modal {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15) !important;
}

html.light .confirm-title {
	color: #18181b !important;
}

html.light .confirm-message {
	color: #52525b !important;
}

html.light .btn-cancel {
	background: #f4f4f5 !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .btn-cancel:hover:not(:disabled) {
	background: #e4e4e7 !important;
	color: #18181b !important;
}

/* --- Empty State --- */
html.light .empty-state {
	color: #52525b !important;
}

html.light .empty-state .empty-icon {
	color: rgba(34, 197, 94, 0.5) !important;
}

html.light .empty-state .empty-title {
	color: #18181b !important;
}

html.light .empty-state .empty-text {
	color: #71717a !important;
}

/* ==========================================
   LIGHT MODE - Area Welcome Screen Overrides
   ========================================== */

/* Recent conversations in area welcome */
html.light [style*="border-color: rgba(255,255,255"] {
	border-color: #e4e4e7 !important;
}

/* Hover state for area items using surface colors */
html.light .hover\:bg-surface-800\/50:hover {
	background-color: #f4f4f5 !important;
}

html.light .group-hover\:text-surface-100 {
	color: #18181b !important;
}

html.light .group-hover\:text-surface-400 {
	color: #52525b !important;
}

/* Text colors for welcome screen */
html.light .text-surface-500 {
	color: #71717a !important;
}

html.light .text-surface-600 {
	color: #52525b !important;
}

/* ==========================================
   LIGHT MODE - Recently Completed Section
   ========================================== */

html.light .recently-completed-section {
	background: transparent !important;
}

html.light .recently-completed-header {
	color: #71717a !important;
}

html.light .completed-task-item {
	background: #ffffff !important;
	border: 1px solid #f4f4f5 !important;
}

html.light .completed-task-item:hover {
	background: #fafafa !important;
	border-color: #e4e4e7 !important;
}

html.light .completed-task-title {
	color: #71717a !important;
}

html.light .reopen-btn {
	color: #52525b !important;
}

html.light .reopen-btn:hover {
	color: #2563eb !important;
	background: rgba(37, 99, 235, 0.05) !important;
}

/* ==========================================
   LIGHT MODE - Task Card Deep Overrides
   ========================================== */

/* TaskCard component specific */
html.light .task-card .complete-btn {
	border-color: #d4d4d8 !important;
}

html.light .task-card .complete-btn:hover {
	background: rgba(34, 197, 94, 0.1) !important;
	border-color: #22c55e !important;
}

html.light .task-card .area-name {
	color: #71717a !important;
}

html.light .task-card .due-indicator {
	color: #71717a !important;
}

html.light .task-card .due-indicator.overdue {
	color: #dc2626 !important;
}

html.light .task-card .due-indicator.today {
	color: #d97706 !important;
}

/* Stale badge */
html.light .stale-badge {
	background: rgba(245, 158, 11, 0.1) !important;
	color: #d97706 !important;
	border: 1px solid rgba(245, 158, 11, 0.2) !important;
}

/* Overdue badge */
html.light .overdue-badge {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
	border: 1px solid rgba(239, 68, 68, 0.2) !important;
}

/* Task card accordion content */
html.light .accordion-content {
	background: #fafafa !important;
	border-top: 1px solid #e4e4e7 !important;
}

html.light .accordion-content .action-btn {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .accordion-content .action-btn:hover {
	background: #f4f4f5 !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

html.light .accordion-content .action-btn.danger:hover {
	background: rgba(239, 68, 68, 0.1) !important;
	border-color: rgba(239, 68, 68, 0.3) !important;
	color: #dc2626 !important;
}

/* ==========================================
   LIGHT MODE - RecentlyCompletedSection Overrides
   ========================================== */

html.light .completed-section {
	border-top-color: #e4e4e7 !important;
}

html.light .completed-section .section-title {
	color: #71717a !important;
}

html.light .completed-section .check-icon {
	color: rgba(34, 197, 94, 0.7) !important;
}

html.light .completed-task {
	background: #ffffff !important;
	border: 1px solid #f4f4f5 !important;
}

html.light .completed-task:hover {
	background: #fafafa !important;
	border-color: #e4e4e7 !important;
}

html.light .completed-task .task-title {
	color: #71717a !important;
	text-decoration-color: #d4d4d8 !important;
}

html.light .completed-task .task-date {
	color: #a1a1aa !important;
}

html.light .completed-task .reopen-btn {
	color: #52525b !important;
	border-color: #e4e4e7 !important;
}

html.light .completed-task .reopen-btn:hover {
	color: #2563eb !important;
	background: rgba(37, 99, 235, 0.05) !important;
	border-color: rgba(37, 99, 235, 0.2) !important;
}

/* ==========================================
   LIGHT MODE - Main Chat Page Overrides
   ========================================== */

/* Main page wrapper when in light mode */
html.light .chat-page,
html.light .main-chat {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

/* Welcome message area */
html.light .welcome-message {
	color: #18181b !important;
}

html.light .welcome-subtitle {
	color: #52525b !important;
}

/* Model selector in main chat */
html.light .model-selector {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .model-selector:hover {
	border-color: #d4d4d8 !important;
}

/* ==========================================
   LIGHT MODE - Subtask Welcome/Chat Overrides
   ========================================== */

html.light .subtask-welcome {
	background: transparent !important;
}

html.light .subtask-title {
	color: #18181b !important;
}

html.light .subtask-description {
	color: #52525b !important;
}

html.light .parent-task-link {
	color: #71717a !important;
}

html.light .parent-task-link:hover {
	color: #18181b !important;
}

/* ==========================================
   LIGHT MODE - TaskContextBanner Overrides
   ========================================== */

html.light .task-banner {
	background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
	border-bottom: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

html.light .task-banner .label {
	color: #71717a !important;
}

html.light .task-banner .focus-button {
	background: rgba(0, 0, 0, 0.04) !important;
	border: 1px solid rgba(0, 0, 0, 0.1) !important;
}

html.light .task-banner .focus-button:hover {
	background: rgba(0, 0, 0, 0.08) !important;
	border-color: rgba(0, 0, 0, 0.15) !important;
}

/* ==========================================
   LIGHT MODE - TaskCard Additional Overrides
   ========================================== */

/* Task card main styles */
html.light .task-card {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .task-card:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06) !important;
}

html.light .task-card.attention {
	background: #fffbeb !important;
	border-color: #fcd34d !important;
}

html.light .task-card.attention:hover {
	background: #fef3c7 !important;
	border-color: #fbbf24 !important;
}

/* Task title */
html.light .task-card .task-title {
	color: #18181b !important;
}

/* Subtask badge */
html.light .task-card .subtask-badge {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

/* Task area badge */
html.light .task-card .task-area {
	/* Keep color-mix for area color but adjust for light mode */
}

/* Due date badges - light mode refinements */
html.light .due-badge.due-later {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

/* Action buttons */
html.light .task-card .action-buttons {
	background: rgba(255, 255, 255, 0.95) !important;
}

html.light .task-card .action-btn {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .task-card .action-btn:hover {
	background: #f4f4f5 !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

html.light .task-card .action-btn.action-done:hover {
	background: rgba(34, 197, 94, 0.1) !important;
	border-color: #22c55e !important;
	color: #16a34a !important;
}

html.light .task-card .action-btn.action-delete:hover {
	background: rgba(239, 68, 68, 0.1) !important;
	border-color: #ef4444 !important;
	color: #dc2626 !important;
}

/* Task arrow/chevron */
html.light .task-card .task-arrow,
html.light .task-card .task-chevron {
	color: #a1a1aa !important;
}

/* Checkbox styling */
html.light .task-card .checkbox {
	background: rgba(34, 197, 94, 0.1) !important;
	border-color: rgba(34, 197, 94, 0.5) !important;
}

html.light .task-card .checkbox:hover {
	background: rgba(34, 197, 94, 0.2) !important;
	border-color: #22c55e !important;
}

/* ==========================================
   LIGHT MODE - Task Focus Page Overrides
   ========================================== */

html.light .task-focus-container {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

html.light .task-focus-header {
	background: rgba(255, 255, 255, 0.95) !important;
	border-bottom: 1px solid #e4e4e7 !important;
	backdrop-filter: blur(8px) !important;
}

html.light .task-focus-header .task-title {
	color: #18181b !important;
}

html.light .task-focus-header .back-btn {
	color: #52525b !important;
}

html.light .task-focus-header .back-btn:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.05) !important;
}

/* Subtasks panel in task focus */
html.light .subtasks-section {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	border-radius: 0.5rem !important;
}

html.light .subtasks-header {
	border-bottom: 1px solid #f4f4f5 !important;
}

html.light .subtask-row {
	background: #fafafa !important;
	border: 1px solid #f4f4f5 !important;
}

html.light .subtask-row:hover {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
}

html.light .subtask-row .subtask-title {
	color: #18181b !important;
}

html.light .subtask-row.completed .subtask-title {
	color: #71717a !important;
	text-decoration-color: #d4d4d8 !important;
}

/* Add subtask button */
html.light .add-subtask-btn {
	color: #52525b !important;
	background: #ffffff !important;
	border: 1px dashed #d4d4d8 !important;
}

html.light .add-subtask-btn:hover {
	color: #18181b !important;
	background: #fafafa !important;
	border-color: #a1a1aa !important;
}

/* ==========================================
   LIGHT MODE - TaskContextPanel (Subtask/Task Sidebar)
   ========================================== */

/* Collapsed Panel */
html.light .collapsed-panel {
	background: #ffffff !important;
	border-right: 1px solid #e4e4e7 !important;
}

html.light .collapsed-panel:hover {
	background: #fafafa !important;
}

html.light .collapsed-indicator {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

html.light .collapsed-label {
	color: #71717a !important;
}

html.light .collapsed-badge {
	color: #2563eb !important;
	background: rgba(59, 130, 246, 0.1) !important;
}

/* Expanded Panel */
html.light .context-panel {
	background: #ffffff !important;
	border-right: 1px solid #e4e4e7 !important;
}

html.light .panel-header {
	border-bottom: 1px solid #f4f4f5 !important;
}

html.light .panel-title {
	color: #18181b !important;
}

html.light .collapse-btn {
	color: #71717a !important;
}

html.light .collapse-btn:hover {
	background: #f4f4f5 !important;
	color: #18181b !important;
}

/* Context Card */
html.light .context-card {
	background: #fafafa !important;
}

html.light .context-card.expanded {
	background: #f4f4f5 !important;
}

html.light .context-card.minimal {
	background: transparent !important;
}

html.light .context-header:hover {
	background: rgba(0, 0, 0, 0.03) !important;
}

html.light .context-header-label {
	color: #71717a !important;
}

html.light .expand-icon {
	color: #a1a1aa !important;
}

/* Context Preview (Collapsed) */
html.light .preview-text {
	color: #52525b !important;
}

/* Context Expanded */
html.light .context-expanded {
	border-top: 1px solid #e4e4e7 !important;
}

html.light .block-text {
	color: #27272a !important;
}

html.light .tips-list {
	color: #52525b !important;
}

/* Conversations Section */
html.light .section-title {
	color: #71717a !important;
}

html.light .section-count {
	color: #52525b !important;
	background: #f4f4f5 !important;
}

html.light .read-only-badge {
	color: #16a34a !important;
	background: rgba(34, 197, 94, 0.1) !important;
}

html.light .new-chat-btn {
	background: rgba(59, 130, 246, 0.05) !important;
	border: 1px dashed rgba(59, 130, 246, 0.3) !important;
}

html.light .new-chat-btn:hover {
	background: rgba(59, 130, 246, 0.1) !important;
	border-style: solid !important;
}

/* Conversation Cards */
html.light .conversation-card {
	background: transparent !important;
}

html.light .conversation-card:hover {
	background: #f4f4f5 !important;
}

html.light .conversation-card.active {
	background: rgba(59, 130, 246, 0.08) !important;
}

html.light .card-icon {
	background: rgba(59, 130, 246, 0.1) !important;
	color: #2563eb !important;
}

html.light .card-title {
	color: #18181b !important;
}

html.light .card-time {
	color: #a1a1aa !important;
}

html.light .empty-state {
	color: #a1a1aa !important;
}

/* Quick Start Section */
html.light .quick-label {
	color: #71717a !important;
}

html.light .action-chip {
	color: #52525b !important;
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .action-chip:hover {
	color: #18181b !important;
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
}

/* Work Unit Mode Details */
html.light .section-label {
	color: #71717a !important;
}

html.light .detail-item {
	background: #fafafa !important;
}

html.light .detail-label {
	color: #71717a !important;
}

html.light .detail-value {
	color: #18181b !important;
}

html.light .description-text {
	color: #52525b !important;
	background: #fafafa !important;
}

/* Plan Button */
html.light .plan-btn {
	color: #16a34a !important;
	background: rgba(34, 197, 94, 0.08) !important;
	border: 1px solid rgba(34, 197, 94, 0.3) !important;
}

html.light .plan-btn:hover {
	background: rgba(34, 197, 94, 0.12) !important;
	border-color: rgba(34, 197, 94, 0.5) !important;
}

/* Cancel Plan Button */
html.light .cancel-plan-btn {
	color: #dc2626 !important;
	background: rgba(239, 68, 68, 0.08) !important;
	border: 1px solid rgba(239, 68, 68, 0.3) !important;
}

html.light .cancel-plan-btn:hover {
	background: rgba(239, 68, 68, 0.12) !important;
	border-color: rgba(239, 68, 68, 0.5) !important;
}

/* Divider */
html.light .divider {
	background: #e4e4e7 !important;
}

/* ==========================================
   LIGHT MODE - Task Focus Page Header
   ========================================== */

html.light .task-focus-page {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

html.light .task-header {
	background: rgba(255, 255, 255, 0.95) !important;
	border-bottom: 1px solid #e4e4e7 !important;
	backdrop-filter: blur(8px) !important;
}

html.light .task-header .back-button {
	color: #52525b !important;
}

html.light .task-header .back-button:hover {
	color: #18181b !important;
	background: rgba(0, 0, 0, 0.05) !important;
}

html.light .task-header .task-title {
	color: #18181b !important;
}

html.light .task-header .breadcrumb {
	color: #71717a !important;
}

html.light .task-header .breadcrumb-link {
	color: #52525b !important;
}

html.light .task-header .breadcrumb-link:hover {
	color: #18181b !important;
}

html.light .task-header .breadcrumb-sep {
	color: #d4d4d8 !important;
}

html.light .task-header .task-due {
	color: #71717a !important;
}

html.light .task-header .deadline-hard {
	color: #dc2626 !important;
}

html.light .task-header .priority-badge {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
}

html.light .task-header .planning-badge {
	background: rgba(139, 92, 246, 0.1) !important;
	color: #7c3aed !important;
}

html.light .task-header .complete-button {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #16a34a !important;
}

html.light .task-header .complete-button:hover {
	background: rgba(34, 197, 94, 0.08) !important;
	border-color: #22c55e !important;
}

html.light .task-header .back-to-dashboard {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .task-header .back-to-dashboard:hover {
	background: #f4f4f5 !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

html.light .task-header .progress-info {
	color: #52525b !important;
}

html.light .task-header .progress-bar {
	background: #e4e4e7 !important;
}

html.light .task-header .panel-toggle {
	color: #52525b !important;
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .task-header .panel-toggle:hover,
html.light .task-header .panel-toggle.active {
	background: #f4f4f5 !important;
	color: #18181b !important;
}

/* ==========================================
   LIGHT MODE - Subtask Panel (Right Side)
   ========================================== */

html.light .subtask-panel {
	background: #ffffff !important;
	border-left: 1px solid #e4e4e7 !important;
}

html.light .subtask-panel-header {
	border-bottom: 1px solid #f4f4f5 !important;
}

html.light .subtask-panel-header h3 {
	color: #18181b !important;
}

/* ==========================================
   LIGHT MODE - Chat Area Wrapper
   ========================================== */

html.light .chat-area-wrapper {
	background: transparent !important;
}

html.light .task-content {
	background: transparent !important;
}

/* ==========================================
   LIGHT MODE - Subtask Completion Banner
   ========================================== */

html.light .completion-banner {
	background: rgba(34, 197, 94, 0.08) !important;
	border: 1px solid rgba(34, 197, 94, 0.2) !important;
}

html.light .completion-banner .banner-text {
	color: #16a34a !important;
}

html.light .completion-banner .reopen-link {
	color: #2563eb !important;
}

html.light .completion-banner .reopen-link:hover {
	text-decoration: underline !important;
}

/* ==========================================
   LIGHT MODE - SpaceSettingsPanel (Right Sidebar)
   ========================================== */

/* Panel Container */
html.light .panel[aria-label="Space Settings"],
html.light aside.panel {
	background: #ffffff !important;
	border-left: 1px solid #e4e4e7 !important;
}

/* Panel Header */
html.light .panel .text-surface-100,
html.light aside.panel h2 {
	color: #18181b !important;
}

html.light .panel .text-surface-500,
html.light aside.panel .text-surface-500 {
	color: #71717a !important;
}

/* Close button */
html.light .panel .text-surface-400,
html.light aside.panel button[title="Close (Esc)"] {
	color: #71717a !important;
}

html.light .panel .hover\:text-surface-200:hover,
html.light aside.panel button:hover {
	color: #18181b !important;
	background: #f4f4f5 !important;
}

/* Settings Sections */
html.light .settings-section {
	background: #fafafa !important;
	border-color: #e4e4e7 !important;
}

html.light .section-header {
	background: transparent !important;
}

html.light .section-title {
	color: #18181b !important;
}

html.light .section-title svg {
	color: #52525b !important;
}

html.light .section-badge {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

/* Field Labels and Values */
html.light .field-label {
	color: #52525b !important;
}

html.light .field-value {
	color: #18181b !important;
}

html.light .field-display {
	color: #18181b !important;
}

html.light .field-input {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #18181b !important;
}

html.light .field-input:focus {
	border-color: #3b82f6 !important;
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* Edit Buttons */
html.light .edit-btn {
	color: #2563eb !important;
}

html.light .edit-btn:hover {
	background: rgba(37, 99, 235, 0.1) !important;
}

/* System Badge */
html.light .system-badge {
	background: #f4f4f5 !important;
	color: #71717a !important;
}

/* Cancel/Save Buttons */
html.light .btn-cancel {
	color: #52525b !important;
	background: transparent !important;
}

html.light .btn-cancel:hover {
	background: #f4f4f5 !important;
	color: #18181b !important;
}

/* Color Picker */
html.light .color-option {
	border-color: transparent !important;
}

html.light .color-option.selected {
	border-color: #18181b !important;
	box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1) !important;
}

/* Theme Picker */
html.light .theme-picker {
	background: transparent !important;
}

html.light .theme-option {
	background: #f4f4f5 !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .theme-option:hover {
	background: #e4e4e7 !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

html.light .theme-option.selected {
	background: rgba(59, 130, 246, 0.1) !important;
	border-color: #3b82f6 !important;
	color: #2563eb !important;
}

html.light .theme-option svg {
	color: inherit !important;
}

/* Context Section */
html.light .context-edit textarea {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #18181b !important;
}

html.light .context-edit textarea:focus {
	border-color: #3b82f6 !important;
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

html.light .context-preview {
	color: #27272a !important;
	background: #fafafa !important;
	border: 1px solid #f4f4f5 !important;
	padding: 0.5rem !important;
	border-radius: 0.375rem !important;
}

html.light .context-empty {
	color: #a1a1aa !important;
}

/* Document Section */
html.light .doc-count {
	background: rgba(59, 130, 246, 0.1) !important;
	color: #2563eb !important;
}

html.light .doc-item {
	background: #ffffff !important;
	border: 1px solid #f4f4f5 !important;
}

html.light .doc-item:hover {
	background: #fafafa !important;
	border-color: #e4e4e7 !important;
}

html.light .doc-icon {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

html.light .doc-name {
	color: #18181b !important;
}

html.light .doc-meta {
	color: #a1a1aa !important;
}

html.light .doc-delete {
	color: #a1a1aa !important;
}

html.light .doc-delete:hover {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
}

/* Delete Confirm */
html.light .confirm-yes {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
}

html.light .confirm-yes:hover {
	background: rgba(239, 68, 68, 0.2) !important;
}

html.light .confirm-no {
	color: #52525b !important;
}

html.light .confirm-no:hover {
	background: #f4f4f5 !important;
}

/* Upload Zone */
html.light .upload-zone {
	background: #fafafa !important;
	border: 2px dashed #d4d4d8 !important;
}

html.light .upload-zone:hover {
	background: #f4f4f5 !important;
	border-color: #a1a1aa !important;
}

html.light .upload-zone.drag-over {
	border-color: #3b82f6 !important;
	background: rgba(59, 130, 246, 0.05) !important;
}

html.light .upload-zone svg {
	color: #a1a1aa !important;
}

html.light .upload-zone p {
	color: #52525b !important;
}

html.light .file-types {
	color: #a1a1aa !important;
}

/* Danger Zone */
html.light .danger-zone {
	background: rgba(239, 68, 68, 0.03) !important;
	border-color: rgba(239, 68, 68, 0.1) !important;
}

html.light .delete-warning {
	color: #52525b !important;
}

html.light .delete-warning strong {
	color: #dc2626 !important;
}

/* ==========================================
   LIGHT MODE - TasksSection White Background Fix
   ========================================== */

/* Fix task-item backgrounds that use white overlay */
html.light .task-item {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light .task-item:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
}

html.light .task-wrapper.expanded .task-item {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
}

/* Task title - ensure no white background */
html.light .task-title {
	color: #18181b !important;
	background: transparent !important;
}

html.light .task-header {
	background: transparent !important;
}

html.light .task-content {
	background: transparent !important;
}

/* Task dot and indicator */
html.light .task-indicator {
	background: transparent !important;
}

html.light .task-dot {
	background: var(--task-color, #3b82f6) !important;
}

/* Task meta */
html.light .task-meta {
	background: transparent !important;
}

html.light .task-status {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

html.light .task-status.planning {
	background: rgba(139, 92, 246, 0.1) !important;
	color: #7c3aed !important;
}

html.light .task-status.in-progress {
	background: rgba(59, 130, 246, 0.1) !important;
	color: #2563eb !important;
}

html.light .task-area {
	color: #52525b !important;
}

html.light .task-time {
	color: #a1a1aa !important;
}

/* Subtask badge */
html.light .subtask-badge {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

/* Priority badge */
html.light .priority-badge {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
}

/* Section title in Tasks */
html.light .tasks-section .section-title {
	color: #71717a !important;
}

/* Task count badge */
html.light .task-count {
	background: #e4e4e7 !important;
	color: #52525b !important;
}

/* Show more button */
html.light .show-more-button {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .show-more-button:hover {
	background: #fafafa !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

/* Expand chevron */
html.light .expand-chevron {
	color: #a1a1aa !important;
}

html.light .task-arrow {
	color: #a1a1aa !important;
}

/* Action buttons */
html.light .action-buttons {
	background: rgba(255, 255, 255, 0.95) !important;
}

html.light .action-btn {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .action-btn:hover {
	background: #f4f4f5 !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

html.light .action-btn.action-done:hover {
	background: rgba(34, 197, 94, 0.1) !important;
	border-color: #22c55e !important;
	color: #16a34a !important;
}

html.light .action-btn.action-delete:hover {
	background: rgba(239, 68, 68, 0.1) !important;
	border-color: #ef4444 !important;
	color: #dc2626 !important;
}

/* Checkbox */
html.light .checkbox {
	background: rgba(34, 197, 94, 0.1) !important;
	border-color: rgba(34, 197, 94, 0.5) !important;
}

html.light .checkbox:hover {
	background: rgba(34, 197, 94, 0.2) !important;
	border-color: #22c55e !important;
}

/* Empty tasks */
html.light .empty-tasks {
	color: #a1a1aa !important;
}

html.light .empty-tasks .empty-icon {
	color: #d4d4d8 !important;
}

html.light .empty-tasks .empty-text {
	color: #a1a1aa !important;
}

/* ==========================================
   LIGHT MODE - Header Icons and Logo Fix
   ========================================== */

/* Header container */
html.light header {
	background: rgba(255, 255, 255, 0.95) !important;
	border-bottom: 1px solid #e4e4e7 !important;
	backdrop-filter: blur(12px) !important;
}

/* Icon buttons in header */
html.light .btn-icon {
	color: #52525b !important;
}

html.light .btn-icon:hover {
	color: #18181b !important;
	background: #f4f4f5 !important;
}

html.light .btn-icon svg {
	stroke: currentColor !important;
}

/* Logo text gradient - make visible in light mode */
html.light .text-gradient {
	background: linear-gradient(135deg, #1a6dff 0%, #00b1af 100%) !important;
	-webkit-background-clip: text !important;
	-webkit-text-fill-color: transparent !important;
	background-clip: text !important;
}

/* Space navigation items */
html.light .space-nav-item {
	color: #52525b !important;
}

html.light .space-nav-item:hover {
	color: #18181b !important;
	background: #f4f4f5 !important;
}

html.light .space-nav-item.active {
	color: var(--space-color, #3b82f6) !important;
	background: color-mix(in srgb, var(--space-color, #3b82f6) 10%, #ffffff) !important;
}

/* Space nav separator */
html.light .space-nav-separator {
	background: #e4e4e7 !important;
}

/* Add space button */
html.light .space-nav-add {
	color: #a1a1aa !important;
	border-color: #d4d4d8 !important;
}

html.light .space-nav-add:hover {
	color: #52525b !important;
	border-color: #a1a1aa !important;
	background: #f4f4f5 !important;
}

/* All spaces button */
html.light .space-nav-all {
	color: #a1a1aa !important;
}

html.light .space-nav-all:hover {
	color: #52525b !important;
	background: #f4f4f5 !important;
}

/* Edit space button */
html.light .space-nav-edit {
	color: #a1a1aa !important;
}

html.light .space-nav-edit:hover {
	color: #18181b !important;
	background: #e4e4e7 !important;
}

/* Ghost button (logout) */
html.light .btn-ghost {
	color: #52525b !important;
}

html.light .btn-ghost:hover {
	color: #18181b !important;
	background: #f4f4f5 !important;
}

/* Mobile spaces/arena links */
html.light header a.flex {
	background: #f4f4f5 !important;
	color: #52525b !important;
	border-color: #e4e4e7 !important;
}

html.light header a.flex:hover {
	background: #e4e4e7 !important;
	color: #18181b !important;
	border-color: #d4d4d8 !important;
}

/* Ensure SVG icons in header are visible */
html.light header svg {
	stroke: currentColor !important;
}

/* Model badge in header */
html.light .model-badge {
	background: #f4f4f5 !important;
	color: #52525b !important;
	border: 1px solid #e4e4e7 !important;
}

/* ==========================================
   LIGHT MODE - SubtaskAccordionList
   ========================================== */

/* Accordion container */
html.light .accordion-list {
	background: #fafafa !important;
	border-top: 1px solid #e4e4e7 !important;
}

/* Progress Row */
html.light .progress-row {
	border-bottom: 1px solid #e4e4e7 !important;
}

html.light .progress-bar {
	background: #e4e4e7 !important;
}

html.light .progress-fill {
	background: #22c55e !important;
}

html.light .progress-text {
	color: #71717a !important;
}

/* Accordion Items */
html.light .accordion-item {
	background: transparent !important;
}

html.light .accordion-item:hover {
	background: #f4f4f5 !important;
}

html.light .item-icon svg {
	color: #a1a1aa !important;
}

html.light .item-title {
	color: #27272a !important;
}

html.light .item-arrow {
	color: #a1a1aa !important;
}

/* Quick checkbox */
html.light .checkbox-inner {
	border-color: #d4d4d8 !important;
}

html.light .quick-checkbox:hover .checkbox-inner {
	border-color: #22c55e !important;
	background: rgba(34, 197, 94, 0.1) !important;
}

/* Hints */
html.light .completed-hint,
html.light .more-hint {
	color: #a1a1aa !important;
}

/* View full link */
html.light .view-full-link {
	color: #71717a !important;
}

html.light .view-full-link:hover {
	color: #18181b !important;
}

html.light .view-full-link svg {
	color: inherit !important;
}

/* Accordion list border for visibility */
html.light .accordion-list {
	border: 1px solid #e4e4e7 !important;
	border-top: none !important;
	border-radius: 0 0 0.5rem 0.5rem !important;
	margin-top: -1px !important;
}

/* ==========================================
   LIGHT MODE - CreateAreaCard
   ========================================== */

html.light .create-card {
	background: #fafafa !important;
	border: 2px dashed #d4d4d8 !important;
}

html.light .create-card:hover {
	background: #f4f4f5 !important;
	border-color: #a1a1aa !important;
	box-shadow: 0 8px 24px -8px rgba(0, 0, 0, 0.1) !important;
}

html.light .create-card .card-icon {
	background: rgba(59, 130, 246, 0.1) !important;
}

html.light .create-card:hover .card-icon {
	background: rgba(59, 130, 246, 0.15) !important;
}

html.light .create-card .card-text {
	color: #2563eb !important;
}

html.light .create-card .card-hint {
	color: #71717a !important;
}

/* ==========================================
   LIGHT MODE - Arena Page (Premium Treatment)
   ========================================== */

/* Main arena container */
html.light .bg-surface-950 {
	background: linear-gradient(180deg, #fafafa 0%, #f4f4f5 100%) !important;
}

/* Hero section */
html.light .text-surface-100 {
	color: #18181b !important;
}

html.light .text-surface-200 {
	color: #27272a !important;
}

html.light .text-surface-300 {
	color: #3f3f46 !important;
}

html.light .text-surface-400 {
	color: #52525b !important;
}

html.light .text-surface-500 {
	color: #71717a !important;
}

/* Hero icon */
html.light .bg-primary-500\/20 {
	background: rgba(59, 130, 246, 0.12) !important;
}

/* Arena Tabs container */
html.light [class*="bg-surface-800\\/50"][class*="rounded-xl"][class*="border"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04) !important;
}

/* Arena Tabs - individual tabs */
html.light [class*="bg-surface-800\\/50"] button {
	color: #52525b !important;
}

html.light [class*="bg-surface-800\\/50"] button:hover {
	background: #f4f4f5 !important;
	color: #18181b !important;
}

html.light [class*="bg-surface-800\\/50"] button[class*="bg-surface-700"] {
	background: #18181b !important;
	color: #ffffff !important;
}

/* Coming soon badge */
html.light [class*="bg-primary-500\\/20"][class*="rounded-full"] {
	background: rgba(59, 130, 246, 0.12) !important;
	color: #2563eb !important;
}

/* Quick Start Section - Premium gradient */
html.light .quick-start-section,
html.light [class*="quick-start"] {
	background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(0, 220, 213, 0.05) 100%) !important;
	border: 1px solid rgba(59, 130, 246, 0.15) !important;
}

html.light .quick-start-section h2,
html.light .quick-start-section .text-surface-100 {
	color: #18181b !important;
}

html.light .quick-start-section p,
html.light .quick-start-section .text-surface-400 {
	color: #52525b !important;
}

html.light .quick-start-section .text-primary-400 {
	color: #2563eb !important;
}

/* Quick Start dropdown button */
html.light .quick-start-dropdown button,
html.light [class*="quick-start"] button:not(.text-primary-400) {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #27272a !important;
}

html.light .quick-start-dropdown button:hover,
html.light [class*="quick-start"] button:not(.text-primary-400):hover {
	background: #f4f4f5 !important;
	border-color: #d4d4d8 !important;
}

/* Quick Start dropdown panel */
html.light .quick-start-dropdown > div[class*="absolute"],
html.light [class*="bg-surface-800"][class*="rounded-xl"][class*="shadow-2xl"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15) !important;
}

html.light .quick-start-dropdown [class*="border-surface-700"] {
	border-color: #e4e4e7 !important;
}

/* Dropdown category tabs */
html.light .quick-start-dropdown [class*="bg-surface-700"] {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

html.light .quick-start-dropdown [class*="bg-surface-700"]:hover {
	background: #e4e4e7 !important;
	color: #18181b !important;
}

html.light .quick-start-dropdown [class*="bg-primary-500"] {
	background: #2563eb !important;
	color: #ffffff !important;
}

/* Template items in dropdown */
html.light .quick-start-dropdown [class*="hover\\:bg-surface-700"] {
	background: transparent !important;
}

html.light .quick-start-dropdown [class*="hover\\:bg-surface-700"]:hover {
	background: #f4f4f5 !important;
}

/* Customize Your Battle Section */
html.light .customize-battle-section,
html.light [class*="bg-surface-800\\/30"][class*="rounded-2xl"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

html.light .customize-battle-section [class*="bg-surface-700"] {
	background: #f4f4f5 !important;
}

html.light .customize-battle-section [class*="text-surface-400"] {
	color: #71717a !important;
}

html.light .customize-battle-section [class*="text-surface-200"] {
	color: #27272a !important;
}

html.light .customize-battle-section [class*="text-surface-500"] {
	color: #71717a !important;
}

/* Category Chips - Premium styling */
html.light .chip {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

html.light .chip:hover:not(:disabled) {
	background: #f4f4f5 !important;
	border-color: #d4d4d8 !important;
	color: #18181b !important;
}

html.light .chip.active {
	background: #18181b !important;
	border-color: #18181b !important;
	color: #ffffff !important;
}

/* Context Picker */
html.light select,
html.light [class*="select"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	color: #18181b !important;
}

html.light select:focus,
html.light [class*="select"]:focus {
	border-color: #3b82f6 !important;
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* Model Selection Section */
html.light [class*="ArenaModelSelection"] h2,
html.light .text-lg.font-semibold.text-surface-100 {
	color: #18181b !important;
}

/* Selected model cards */
html.light [class*="bg-surface-800\\/70"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04) !important;
}

html.light [class*="bg-surface-800\\/70"]:hover {
	border-color: #d4d4d8 !important;
}

/* Model provider badges */
html.light [class*="getProviderColor"] {
	background: #f4f4f5 !important;
}

/* Remove model button */
html.light [class*="bg-surface-800\\/70"] button[class*="hover\\:bg-red"] {
	color: #a1a1aa !important;
}

html.light [class*="bg-surface-800\\/70"] button[class*="hover\\:bg-red"]:hover {
	background: rgba(239, 68, 68, 0.1) !important;
	color: #dc2626 !important;
}

/* Add model button */
html.light [class*="Add model"],
html.light button[class*="border-dashed"] {
	background: #fafafa !important;
	border: 2px dashed #d4d4d8 !important;
	color: #52525b !important;
}

html.light [class*="Add model"]:hover,
html.light button[class*="border-dashed"]:hover {
	background: #f4f4f5 !important;
	border-color: #a1a1aa !important;
	color: #18181b !important;
}

/* Surprise me & Select from all models buttons */
html.light .flex.items-center.gap-4 button[class*="text-surface"] {
	color: #52525b !important;
}

html.light .flex.items-center.gap-4 button[class*="text-surface"]:hover {
	color: #18181b !important;
}

/* Clear all button */
html.light button[class*="text-surface-500"][class*="hover\\:text-red"] {
	color: #71717a !important;
}

html.light button[class*="text-surface-500"][class*="hover\\:text-red"]:hover {
	color: #dc2626 !important;
}

/* Tip text */
html.light .text-xs.text-surface-500 {
	color: #71717a !important;
}

/* Arena Input Area */
html.light [class*="ArenaInput"],
html.light .arena-input-container {
	background: #ffffff !important;
	border-top: 1px solid #e4e4e7 !important;
}

html.light [class*="ArenaInput"] textarea,
html.light .arena-input-container textarea {
	background: #fafafa !important;
	border: 1px solid #e4e4e7 !important;
	color: #18181b !important;
}

html.light [class*="ArenaInput"] textarea:focus,
html.light .arena-input-container textarea:focus {
	background: #ffffff !important;
	border-color: #3b82f6 !important;
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

html.light [class*="ArenaInput"] textarea::placeholder {
	color: #a1a1aa !important;
}

/* Input action buttons */
html.light [class*="ArenaInput"] button[class*="rounded-full"],
html.light .arena-input-container button[class*="rounded-full"] {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

html.light [class*="ArenaInput"] button[class*="rounded-full"]:hover,
html.light .arena-input-container button[class*="rounded-full"]:hover {
	background: #e4e4e7 !important;
	color: #18181b !important;
}

/* Keyboard hint */
html.light .arena-input-container kbd,
html.light [class*="ArenaInput"] kbd {
	background: #f4f4f5 !important;
	border: 1px solid #e4e4e7 !important;
	color: #52525b !important;
}

/* Model count indicator */
html.light [class*="models"] {
	color: #71717a !important;
}

/* Active Battle State */
html.light [class*="bg-surface-800\\/50"][class*="rounded-2xl"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
}

html.light [class*="bg-surface-700"][class*="rounded-full"] {
	background: #f4f4f5 !important;
	color: #52525b !important;
}

html.light [class*="bg-amber-500\\/20"] {
	background: rgba(245, 158, 11, 0.1) !important;
}

html.light [class*="text-amber-400"] {
	color: #d97706 !important;
}

html.light [class*="bg-green-500\\/20"] {
	background: rgba(34, 197, 94, 0.1) !important;
}

html.light [class*="text-green-400"] {
	color: #16a34a !important;
}

/* Arena Response Cards */
html.light .arena-response-card,
html.light [class*="ArenaResponseCard"] {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04) !important;
}

/* Placeholder states */
html.light [class*="bg-surface-800"][class*="rounded-full"]:not([class*="bg-primary"]) {
	background: #f4f4f5 !important;
}

/* Results/Rankings placeholders */
html.light .text-xl.font-semibold.text-surface-200 {
	color: #18181b !important;
}

html.light .text-surface-400.max-w-md {
	color: #52525b !important;
}

/* =============================================================================
   Command Palette - Light Mode
   ============================================================================= */

/* Backdrop */
html.light .backdrop {
	background: rgba(255, 255, 255, 0.7) !important;
	backdrop-filter: blur(8px) !important;
}

/* Main palette container */
html.light .palette {
	background: #ffffff !important;
	border: 1px solid #e4e4e7 !important;
	box-shadow:
		0 0 0 1px rgba(0, 0, 0, 0.03),
		0 25px 50px -12px rgba(0, 0, 0, 0.15),
		0 0 100px rgba(59, 130, 246, 0.08) !important;
}

/* Search container */
html.light .search-container {
	border-bottom: 1px solid #e4e4e7 !important;
}

html.light .search-icon {
	color: #a1a1aa !important;
}

html.light .search-input {
	color: #18181b !important;
}

html.light .search-input::placeholder {
	color: #a1a1aa !important;
}

html.light .search-hint span {
	color: #71717a !important;
}

/* Category labels */
html.light .category-label {
	color: #71717a !important;
}

/* Command items */
html.light .command-item {
	background: transparent !important;
}

html.light .command-item:hover,
html.light .command-item.selected {
	background: #f4f4f5 !important;
}

html.light .command-item.selected {
	background: rgba(59, 130, 246, 0.08) !important;
}

/* Command icon */
html.light .command-icon {
	background: #f4f4f5 !important;
	color: #71717a !important;
}

html.light .command-item.selected .command-icon,
html.light .command-item:hover .command-icon {
	background: rgba(59, 130, 246, 0.1) !important;
	color: #2563eb !important;
}

/* Command content */
html.light .command-label {
	color: #27272a !important;
}

html.light .command-item.selected .command-label {
	color: #18181b !important;
}

html.light .command-description {
	color: #71717a !important;
}

/* Keyboard shortcuts */
html.light kbd {
	background: #f4f4f5 !important;
	border: 1px solid #e4e4e7 !important;
	color: #71717a !important;
}

html.light .command-shortcut {
	background: #f4f4f5 !important;
	border-color: #e4e4e7 !important;
}

/* No results state */
html.light .no-results {
	color: #71717a !important;
}

html.light .no-results-icon {
	opacity: 0.4 !important;
}

/* Footer */
html.light .footer {
	border-top: 1px solid #e4e4e7 !important;
	background: #fafafa !important;
}

html.light .footer-hint {
	color: #71717a !important;
}

/* Results scrollbar */
html.light .results::-webkit-scrollbar-thumb {
	background: rgba(0, 0, 0, 0.1) !important;
}

html.light .results::-webkit-scrollbar-thumb:hover {
	background: rgba(0, 0, 0, 0.2) !important;
}

/* ============================================================================
   Easter Egg Animations
   ============================================================================ */

/* Konami Code Animation */
@keyframes konami-rainbow {
	0% { filter: hue-rotate(0deg); }
	100% { filter: hue-rotate(360deg); }
}

@keyframes konami-shake {
	0%, 100% { transform: translateX(0); }
	10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
	20%, 40%, 60%, 80% { transform: translateX(5px); }
}

body.konami-activated {
	animation: konami-rainbow 1.5s ease-in-out, konami-shake 0.5s ease-in-out;
}

/* Barrel Roll Animation */
@keyframes barrel-roll {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

.barrel-roll {
	animation: barrel-roll 1s ease-in-out;
}

/* Coin Flip Animation */
.coin-flip-animation {
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	font-size: 4rem;
	z-index: 9999;
	pointer-events: none;
	animation: coin-flip 1.5s ease-out forwards;
}

@keyframes coin-flip {
	0% {
		transform: translate(-50%, -50%) rotateY(0deg) scale(1);
		opacity: 1;
	}
	25% {
		transform: translate(-50%, -150%) rotateY(180deg) scale(1.2);
	}
	50% {
		transform: translate(-50%, -200%) rotateY(360deg) scale(1.3);
	}
	75% {
		transform: translate(-50%, -100%) rotateY(540deg) scale(1.1);
	}
	100% {
		transform: translate(-50%, -50%) rotateY(720deg) scale(1);
		opacity: 0;
	}
}

/* Logo Bounce Animation */
@keyframes logo-bounce {
	0%, 100% { transform: scale(1); }
	25% { transform: scale(1.2) rotate(-5deg); }
	50% { transform: scale(0.9) rotate(5deg); }
	75% { transform: scale(1.1) rotate(-3deg); }
}

.logo-easter-egg {
	animation: logo-bounce 0.6s ease-in-out;
}

/* Confetti-like particle effect for discoveries */
@keyframes confetti-fall {
	0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
	100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

/* Subtle glow effect for easter egg discoveries */
@keyframes discovery-glow {
	0%, 100% { box-shadow: 0 0 5px rgba(26, 109, 255, 0.3); }
	50% { box-shadow: 0 0 20px rgba(26, 109, 255, 0.6), 0 0 30px rgba(0, 220, 213, 0.4); }
}

/* Discovery Toast - Special styling for easter egg finds */
.discovery-toast {
	animation: discovery-shimmer 2s ease-in-out infinite;
	box-shadow: 0 0 20px rgba(168, 85, 247, 0.4), 0 4px 20px rgba(0, 0, 0, 0.3);
}

@keyframes discovery-shimmer {
	0%, 100% {
		box-shadow: 0 0 20px rgba(168, 85, 247, 0.4), 0 4px 20px rgba(0, 0, 0, 0.3);
	}
	50% {
		box-shadow: 0 0 30px rgba(236, 72, 153, 0.5), 0 0 40px rgba(245, 158, 11, 0.3), 0 4px 20px rgba(0, 0, 0, 0.3);
	}
}

.discovery-icon {
	animation: discovery-sparkle 1s ease-in-out infinite;
}

@keyframes discovery-sparkle {
	0%, 100% { transform: scale(1) rotate(0deg); }
	50% { transform: scale(1.2) rotate(15deg); }
}

/* Hacker Theme - Matrix style */
.theme-hacker {
	--bg-body: #0a0a0a !important;
	--color-surface-950: #0a0a0a !important;
	--color-surface-900: #0d1a0d !important;
	--color-surface-800: #0f2a0f !important;
	--color-surface-700: #1a3a1a !important;
	--color-primary-500: #00ff00 !important;
	--color-primary-400: #33ff33 !important;
	--gradient-primary: linear-gradient(135deg, #00ff00 0%, #00aa00 100%) !important;
}

.theme-hacker * {
	color: #00ff00 !important;
	border-color: #00aa00 !important;
}

.theme-hacker input,
.theme-hacker textarea,
.theme-hacker button {
	background: #0d1a0d !important;
	color: #00ff00 !important;
}

.theme-hacker .text-gradient {
	background: linear-gradient(135deg, #00ff00, #00ffaa) !important;
	-webkit-background-clip: text !important;
	-webkit-text-fill-color: transparent !important;
	background-clip: text !important;
}

/* Matrix rain effect for hacker theme */
@keyframes matrix-rain {
	0% { text-shadow: 0 0 5px #00ff00; }
	50% { text-shadow: 0 0 20px #00ff00, 0 0 30px #00aa00; }
	100% { text-shadow: 0 0 5px #00ff00; }
}

.theme-hacker h1,
.theme-hacker h2,
.theme-hacker .font-bold {
	animation: matrix-rain 2s ease-in-out infinite;
}

/* Ship It! Rocket Animation */
.ship-it-container {
	position: fixed;
	bottom: 100px;
	left: 50%;
	transform: translateX(-50%);
	z-index: 9999;
	pointer-events: none;
}

.ship-it-rocket {
	font-size: 3rem;
	animation: rocket-launch 1.5s ease-in forwards;
}

@keyframes rocket-launch {
	0% {
		transform: translateY(0) rotate(0deg);
		opacity: 1;
	}
	20% {
		transform: translateY(10px) rotate(-5deg);
	}
	40% {
		transform: translateY(-50px) rotate(5deg);
	}
	100% {
		transform: translateY(-100vh) rotate(0deg);
		opacity: 0;
	}
}

/* Rocket exhaust particles */
.ship-it-particle {
	position: absolute;
	bottom: -10px;
	left: 50%;
	width: 8px;
	height: 8px;
	border-radius: 50%;
	animation: exhaust-particle 0.8s ease-out forwards;
}

.ship-it-particle:nth-child(1) { background: #ff6b35; animation-delay: 0s; }
.ship-it-particle:nth-child(2) { background: #ffb347; animation-delay: 0.1s; transform: translateX(-10px); }
.ship-it-particle:nth-child(3) { background: #ff6b35; animation-delay: 0.15s; transform: translateX(10px); }
.ship-it-particle:nth-child(4) { background: #ffd700; animation-delay: 0.2s; }
.ship-it-particle:nth-child(5) { background: #ffb347; animation-delay: 0.25s; transform: translateX(-15px); }
.ship-it-particle:nth-child(6) { background: #ff6b35; animation-delay: 0.3s; transform: translateX(15px); }

@keyframes exhaust-particle {
	0% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
	100% {
		opacity: 0;
		transform: translateY(80px) scale(0.3);
	}
}

/* Screen shake for rocket launch */
@keyframes rocket-shake {
	0%, 100% { transform: translateX(0); }
	10%, 30%, 50%, 70% { transform: translateX(-2px); }
	20%, 40%, 60%, 80% { transform: translateX(2px); }
}

.ship-it-shake {
	animation: rocket-shake 0.4s ease-in-out;
}

/* =========================================
   Page Editor Typography Styles
   Based on DOCUMENT_SYSTEM.md Section 5.1
   ========================================= */

.editor-body {
	font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
	font-size: 16px;
	line-height: 1.7;
	color: var(--editor-text);
}

.editor-body h1 {
	font-size: 2rem;
	font-weight: 700;
	margin-top: 2rem;
	margin-bottom: 1rem;
	line-height: 1.3;
	color: var(--editor-text);
}

.editor-body h2 {
	font-size: 1.5rem;
	font-weight: 600;
	margin-top: 1.75rem;
	margin-bottom: 0.75rem;
	line-height: 1.35;
	color: var(--editor-text);
}

.editor-body h3 {
	font-size: 1.25rem;
	font-weight: 600;
	margin-top: 1.5rem;
	margin-bottom: 0.5rem;
	line-height: 1.4;
	color: var(--editor-text);
}

.editor-body p {
	margin-bottom: 1rem;
}

.editor-body code {
	font-family: 'JetBrains Mono', 'Fira Code', monospace;
	font-size: 0.9em;
	background: var(--editor-bg-secondary);
	padding: 0.2em 0.4em;
	border-radius: 4px;
}

.editor-body pre {
	background: var(--editor-bg-secondary);
	padding: 1rem;
	border-radius: 8px;
	overflow-x: auto;
	margin: 1rem 0;
	position: relative;
}

/* Language badge for code blocks (when language is set) */
.editor-body pre[data-language]:not([data-language=""])::before {
	content: attr(data-language);
	position: absolute;
	top: 0.5rem;
	right: 0.5rem;
	padding: 0.125rem 0.5rem;
	background: rgba(255, 255, 255, 0.1);
	border-radius: 4px;
	font-size: 0.6875rem;
	font-weight: 500;
	color: #9ca3af;
	text-transform: uppercase;
	letter-spacing: 0.025em;
	pointer-events: none;
}

.editor-body pre code {
	background: transparent;
	padding: 0;
}

/* Highlight.js syntax highlighting theme - VS Code Dark+ inspired */
.editor-body pre code .hljs-keyword,
.editor-body pre code .hljs-selector-tag,
.editor-body pre code .hljs-built_in,
.editor-body pre code .hljs-name {
	color: #c586c0; /* Purple - keywords */
}

.editor-body pre code .hljs-function,
.editor-body pre code .hljs-title.function_ {
	color: #dcdcaa; /* Yellow - functions */
}

.editor-body pre code .hljs-string,
.editor-body pre code .hljs-attr {
	color: #ce9178; /* Orange - strings */
}

.editor-body pre code .hljs-number,
.editor-body pre code .hljs-literal {
	color: #b5cea8; /* Light green - numbers */
}

.editor-body pre code .hljs-comment,
.editor-body pre code .hljs-quote {
	color: #6a9955; /* Green - comments */
	font-style: italic;
}

.editor-body pre code .hljs-variable,
.editor-body pre code .hljs-template-variable {
	color: #9cdcfe; /* Light blue - variables */
}

.editor-body pre code .hljs-type,
.editor-body pre code .hljs-class,
.editor-body pre code .hljs-title.class_ {
	color: #4ec9b0; /* Teal - types/classes */
}

.editor-body pre code .hljs-params {
	color: #9cdcfe; /* Light blue - parameters */
}

.editor-body pre code .hljs-meta {
	color: #569cd6; /* Blue - meta/decorators */
}

.editor-body pre code .hljs-tag {
	color: #569cd6; /* Blue - HTML tags */
}

.editor-body pre code .hljs-attribute {
	color: #9cdcfe; /* Light blue - HTML attributes */
}

.editor-body pre code .hljs-selector-class,
.editor-body pre code .hljs-selector-id {
	color: #d7ba7d; /* Gold - CSS selectors */
}

.editor-body pre code .hljs-property {
	color: #9cdcfe; /* Light blue - properties */
}

.editor-body pre code .hljs-operator,
.editor-body pre code .hljs-punctuation {
	color: #d4d4d4; /* Light gray - operators */
}

.editor-body pre code .hljs-regexp {
	color: #d16969; /* Red - regex */
}

.editor-body pre code .hljs-symbol {
	color: #b5cea8; /* Light green - symbols */
}

.editor-body pre code .hljs-doctag {
	color: #608b4e; /* Darker green - doc tags */
}

.editor-body blockquote {
	border-left: 4px solid var(--editor-border-focus);
	padding-left: 1rem;
	margin-left: 0;
	margin-right: 0;
	margin-top: 1rem;
	margin-bottom: 1rem;
	color: var(--editor-text-secondary);
	font-style: italic;
}

.editor-body ul,
.editor-body ol {
	margin: 1rem 0;
	padding-left: 1.5rem;
}

.editor-body li {
	margin-bottom: 0.5rem;
}

.editor-body ul li {
	list-style-type: disc;
}

.editor-body ol li {
	list-style-type: decimal;
}

/* Task list items */
.editor-body ul[data-type="taskList"] {
	list-style: none;
	padding-left: 0;
}

.editor-body ul[data-type="taskList"] li {
	display: flex;
	align-items: flex-start;
	gap: 0.5rem;
}

.editor-body ul[data-type="taskList"] li input[type="checkbox"] {
	margin-top: 0.25rem;
	width: 1rem;
	height: 1rem;
	accent-color: var(--editor-border-focus);
}

/* Links */
.editor-body a,
.editor-body .editor-link {
	color: var(--editor-border-focus);
	text-decoration: underline;
	text-underline-offset: 2px;
	cursor: pointer;
}

.editor-body a:hover,
.editor-body .editor-link:hover {
	opacity: 0.8;
}

/* Horizontal rule */
.editor-body hr {
	border: none;
	border-top: 2px solid var(--editor-border);
	margin: 2rem 0;
}

/* ============================================
   TABLE STYLES (Pages Editor)
   ============================================ */

.editor-body table {
	border-collapse: collapse;
	table-layout: fixed;
	width: 100%;
	margin: 1rem 0;
	overflow: hidden;
	border-radius: 0.5rem;
}

.editor-body th,
.editor-body td {
	min-width: 1em;
	border: 2px solid var(--editor-border);
	padding: 0.5rem 0.75rem;
	vertical-align: top;
	box-sizing: border-box;
	position: relative;
}

.editor-body th {
	font-weight: 600;
	text-align: left;
	background-color: var(--editor-bg-secondary);
	color: var(--editor-text);
}

.editor-body td {
	background-color: var(--editor-bg);
	color: var(--editor-text);
}

/* Selected cell highlight */
.editor-body .selectedCell {
	background-color: var(--editor-selection);
	outline: 2px solid var(--editor-border-focus);
	outline-offset: -2px;
}

/* Column resize handle */
.editor-body .column-resize-handle {
	position: absolute;
	right: -2px;
	top: 0;
	bottom: -2px;
	width: 4px;
	background-color: transparent;
	cursor: col-resize;
	z-index: 10;
	pointer-events: all;
}

.editor-body .column-resize-handle:hover {
	background-color: var(--editor-border-focus);
}

/* Table cell paragraph spacing (prevent extra gaps) */
.editor-body td > p,
.editor-body th > p {
	margin: 0;
}

/* Empty cell placeholder */
.editor-body td:empty::before,
.editor-body th:empty::before {
	content: '';
	display: inline-block;
	width: 1px;
}

/* Total row styling */
.editor-body tr[data-total="true"] td,
.editor-body tr[data-is-total="true"] td {
	font-weight: 600;
	background-color: var(--editor-bg-secondary);
	border-top: 3px solid var(--editor-border-focus);
	color: var(--editor-text);
}

.editor-body .formula-cell {
	font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
	color: var(--color-primary-400);
	font-variant-numeric: tabular-nums;
	cursor: default;
	user-select: none;
}

/* Phase 2.5: Muted table cell background colors */
:root {
	--table-color-gray: rgba(156, 163, 175, 0.15);
	--table-color-blue: rgba(59, 130, 246, 0.12);
	--table-color-green: rgba(34, 197, 94, 0.12);
	--table-color-amber: rgba(245, 158, 11, 0.12);
	--table-color-red: rgba(239, 68, 68, 0.10);
	--table-color-purple: rgba(168, 85, 247, 0.12);
}

/* Phase 2.5:  prefix - only show when explicitly enabled */
.editor-body td[data-show-prefix="true"]::before {
	content: ' ';
	opacity: 0.5;
	margin-right: 0.25rem;
}

/* Legacy: Remove default  from total rows (Phase 2 cleanup) */
/* Only show prefix when data-show-prefix="true" is set on cell */

/* Phase 2.5: Formula mode - clickable cells */
.editor-body-wrapper.formula-mode {
	/* Indicate we're in a special mode */
}

.editor-body-wrapper.formula-mode .editor-body table td,
.editor-body-wrapper.formula-mode .editor-body table th {
	cursor: pointer !important;
	transition: background-color 150ms ease, box-shadow 150ms ease;
}

.editor-body-wrapper.formula-mode .editor-body table td:hover,
.editor-body-wrapper.formula-mode .editor-body table th:hover {
	background-color: rgba(59, 130, 246, 0.15) !important;
	box-shadow: inset 0 0 0 2px rgba(59, 130, 246, 0.4);
}

/* Formula mode - highlight the source cell (different color) */
.editor-body-wrapper.formula-mode .editor-body table td:focus,
.editor-body-wrapper.formula-mode .editor-body table th:focus {
	background-color: rgba(245, 158, 11, 0.15) !important;
	box-shadow: inset 0 0 0 2px rgba(245, 158, 11, 0.5);
}

/* Disable text selection in formula mode */
.editor-body-wrapper.formula-mode .editor-body table {
	user-select: none;
}

/* Selection */
.editor-body ::selection {
	background: var(--editor-selection);
}

/* Syntax highlighting for code blocks */
.editor-body pre code .hljs-keyword,
.editor-body pre code .hljs-selector-tag,
.editor-body pre code .hljs-title,
.editor-body pre code .hljs-section,
.editor-body pre code .hljs-doctag,
.editor-body pre code .hljs-name,
.editor-body pre code .hljs-strong {
	color: #ff7b72;
}

.editor-body pre code .hljs-string,
.editor-body pre code .hljs-title.class_,
.editor-body pre code .hljs-addition {
	color: #a5d6ff;
}

.editor-body pre code .hljs-comment,
.editor-body pre code .hljs-quote,
.editor-body pre code .hljs-deletion {
	color: #8b949e;
}

.editor-body pre code .hljs-literal,
.editor-body pre code .hljs-number {
	color: #79c0ff;
}

.editor-body pre code .hljs-built_in,
.editor-body pre code .hljs-type {
	color: #ffa657;
}

.editor-body pre code .hljs-params {
	color: var(--editor-text);
}

.editor-body pre code .hljs-variable {
	color: #ffa657;
}

/* Light mode syntax highlighting adjustments */
html.light .editor-body pre code .hljs-keyword,
html.light .editor-body pre code .hljs-selector-tag,
html.light .editor-body pre code .hljs-title,
html.light .editor-body pre code .hljs-section,
html.light .editor-body pre code .hljs-doctag,
html.light .editor-body pre code .hljs-name,
html.light .editor-body pre code .hljs-strong {
	color: #cf222e;
}

html.light .editor-body pre code .hljs-string,
html.light .editor-body pre code .hljs-title.class_,
html.light .editor-body pre code .hljs-addition {
	color: #0a3069;
}

html.light .editor-body pre code .hljs-comment,
html.light .editor-body pre code .hljs-quote,
html.light .editor-body pre code .hljs-deletion {
	color: #6e7781;
}

html.light .editor-body pre code .hljs-literal,
html.light .editor-body pre code .hljs-number {
	color: #0550ae;
}

html.light .editor-body pre code .hljs-built_in,
html.light .editor-body pre code .hljs-type {
	color: #953800;
}

html.light .editor-body pre code .hljs-variable {
	color: #953800;
}

/* Phase 4: Accessibility - Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	/* Preserve loading spinners (functional, not decorative) */
	.spinner,
	.loading-spinner,
	[class*="spin"],
	[class*="Spin"] {
		animation-duration: 0.8s !important;
	}
}
